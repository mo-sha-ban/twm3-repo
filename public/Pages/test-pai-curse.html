<!DOCTYPE html>
<html lang="ar">
  <head>
    <meta charset="UTF-8" />
    <title>Course Content</title>
  </head>
  <body>
    <div id="courseContent"></div>
    <div id="lessonsList"></div>
    <a href="index.html">Back to Courses</a>
    <!-- Link back to the main page -->

    <script>
      // استرجاع معرف الدورة من URL
      const urlParams = new URLSearchParams(window.location.search);
      const courseId = urlParams.get("id");

      // جلب معلومات الدورة من ملف JSON
      fetch("courses.json")
        .then((response) => response.json())
        .then((courses) => {
          const course = courses.find((course) => course.id == courseId);
          if (course) {
            // عرض معلومات الدورة
            document.getElementById("courseContent").innerHTML = `
                        <h1>${course.title}</h1>
                        <p>${course.description}</p>
                        <p>Price: ${course.price}</p>
                    `;

            // عرض قائمة الدروس
            const lessonsList = document.getElementById("lessonsList");
            lessonsList.innerHTML = "<h2>Lessons:</h2>";
            course.lessons.forEach((lesson, index) => {
              const lessonLink = document.createElement("a");
              lessonLink.href = "#";
              lessonLink.innerText = lesson.title;
              lessonLink.setAttribute("data-index", index);
              lessonLink.addEventListener("click", function (event) {
                event.preventDefault(); // منع الانتقال
                displayLesson(course.lessons[index]);
              });
              lessonsList.appendChild(lessonLink);
              lessonsList.appendChild(document.createElement("br")); // إضافة فاصل
            });
          } else {
            document.getElementById(
              "courseContent"
            ).innerHTML = `<p>Course not found.</p>`;
          }
        })
        .catch((error) => console.error("Error fetching course data:", error));

      function displayLesson(lesson) {
        // عرض محتوى الدرس
        document.getElementById("courseContent").innerHTML += `
                <h3>${lesson.title}</h3>
                <p>${lesson.content}</p>
            `;
      }
    </script>
  </body>
</html>
