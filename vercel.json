{
  "version": 2,
  "builds": [
    {
      "src": "server.js",
      "use": "@vercel/node"
    }
  ],
  "routes": [
    { "src": "/(css|js|img|pdfjs|Pages|scripts)/(.*)", "dest": "/$1/$2", "headers": { "Cache-Control": "public, max-age=31536000, immutable" } },
    { "src": "/(.*)\\.json", "dest": "/$1.json", "headers": { "Cache-Control": "public, max-age=3600" } },
    { "src": "/(.*)\\.html", "dest": "/$1.html", "headers": { "Cache-Control": "public, max-age=0, must-revalidate" } },
    { "src": "/api/(.*)", "dest": "/server.js" },
    { "src": "/auth/(.*)", "dest": "/server.js" },
    { "src": "/(?!api|auth|_vercel|favicon.ico).*", "dest": "/index.html" },
    { "src": "/(.*)", "dest": "/server.js" }
  ],
  "env": {
    "NODE_ENV": "production",
    "FRONTEND_BASE_URL": "https://twm3.org",
    "GOOGLE_CLIENT_ID": "@google-client-id",
    "GOOGLE_CLIENT_SECRET": "@google-client-secret",
    "GITHUB_CLIENT_ID": "@github-client-id",
    "GITHUB_CLIENT_SECRET": "@github-client-secret",
    "JWT_SECRET": "@jwt-secret",
    "MONGO_URI": "@mongo-uri"
  },
  "cleanUrls": true,
  "trailingSlash": false
}
