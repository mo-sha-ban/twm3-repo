<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تفاصيل المنتج - TWM3</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/product-details.css">
    <link rel="stylesheet" href="css/reviews-comments.css">
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Marhey:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" href="img/loogo.png">
</head>
<body>
    <style>
        /* Plyr Video Player Styles */
        .plyr__video-embed {
            position: relative;
            width: 100%;
        }
        
        #yt-player-container, #video-player-container {
            width: 100%;
            aspect-ratio: 16/9;
            background: #000;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        #yt-player, #video-player {
            width: 100%;
            height: 100%;
            display: block;
        }
        
        .plyr {
            --plyr-color-main: #3498db;
            --plyr-control-radius: 4px;
            width: 100% !important;
            height: 100% !important;
        }
        
        .plyr video {
            width: 100% !important;
            height: 100% !important;
        }
        
        /* Full Description Styles */
        #full-description {
            line-height: 1.8;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        /* Quill Video Embed Styles */
        #full-description .quill-video-embed {
            margin: 20px auto;
            max-width: 100%;
            aspect-ratio: 16/9;
            background: #000;
            border-radius: 8px;
            overflow: hidden;
            display: block;
            position: relative;
        }

        #full-description video,
        #full-description iframe {
            width: 100%;
            height: 100%;
            display: block;
        }
        
        /* Ensure proper spacing around media */
        #full-description .quill-video-embed + p,
        #full-description p + .quill-video-embed {
            margin-top: 20px;
        }
    </style>
    <style>
        /* Liquid Glass Cart Icon Styles */
        .cart-icon-container {
            position: fixed;
            bottom: 40px;
            left: 50px;
            z-index: 1000;  
        }

        .cart-icon-link {
            text-decoration: none;
            color: inherit;
        }

        .liquid-glass-cart-icon {
            position: relative;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background:
                radial-gradient(circle at top left, rgba(59, 130, 246, 0.4), transparent 60%),
                rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(148, 163, 184, 0.3);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        /* Dark mode support */
        body.dark .liquid-glass-cart-icon,
        :root.dark-theme .liquid-glass-cart-icon {
            background:
                radial-gradient(circle at top left, rgba(59, 130, 246, 0.6), transparent 60%),
                rgba(15, 23, 42, 0.9);
            border: 1px solid rgba(148, 163, 184, 0.5);
        }

        .liquid-glass-cart-icon:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 12px rgba(0, 0, 0, 0.15);
            background:
                radial-gradient(circle at top left, rgba(59, 130, 246, 0.6), transparent 60%),
                rgba(255, 255, 255, 0.95);
        }

        body.dark .liquid-glass-cart-icon:hover,
        :root.dark-theme .liquid-glass-cart-icon:hover {
            background:
                radial-gradient(circle at top left, rgba(59, 130, 246, 0.8), transparent 60%),
                rgba(15, 23, 42, 0.95);
        }

        .liquid-glass-cart-icon i {
            font-size: 1.2rem;
            color: var(--primary-color);
        }

        body.dark .liquid-glass-cart-icon i,
        :root.dark-theme .liquid-glass-cart-icon i {
            color: #60a5fa;
        }

        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            width: 24px;
            height: 24px;
            background: var(--primary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 600;
            border: 2px solid var(--bg-primary);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        body.dark .cart-badge,
        :root.dark-theme .cart-badge {
            border-color: rgba(15, 23, 42, 0.9);
        }

        .cart-badge.empty {
            display: none;
        }

        .cart-badge.pulse {
            animation: pulse 1.5s ease-in-out;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.2);
            }
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .liquid-glass-cart-icon {
                width: 40px;
                height: 40px;
            }

            .liquid-glass-cart-icon i {
                font-size: 1rem;
            }

            .cart-badge {
                width: 20px;
                height: 20px;
                font-size: 0.65rem;
                top: -6px;
                right: -6px;
            }
        }
    </style>
    <!-- Header -->
    <div dir="rtl" class="header">
      <div class="container">
        <div class="logo">
          <a href="index.html"><img src="img/logo.png" alt=""></a>
      </div>
          <div id="list" class="links">
              <ul>
                  <li><a href="index.html">الرئيسيه</a></li>
                  <li><a href="courses.html">الكورسات </a></li>
                  <li><a href="portfolio.html">مشاريعنا </a></li>
                  <li class="nav-dropdown"><a href="roadmap.html">مسارات التعلم <i class="fa-solid fa-angle-down"></i></a>
                      <ul class="nav-dropdown-items">
                          <li><a href="frontendroadmap.html">Front End </a></li>
                          <li><a href="backendroadmap.html">Back End</a></li>
                          <li><a href="cybersecurityroadmap.html">Cyber security</a></li>
                      </ul>
                  </li>
              </ul>
          </div>
          <div  class="bars">
              <i id="bars" class="fa-solid fa-bars "></i>
          </div>
          <div class="icon">
          <div id="colorMode" class="theme">
              <i  class="fa-solid fa-moon moon"></i>
              <i  class="fa-solid fa-sun sun"></i>
          </div>
                                <a href="store.html" aria-label="المتجر" title="المتجر"><i class="fa-solid fa-store store"></i></a>
                  <a href="login.html" aria-label="تسجيل الدخول" title="تسجيل الدخول"><i class="fa-solid fa-user user"></i></a>
                  <!-- Liquid Glass Cart Icon -->
                  <div class="cart-icon-container" id="cartIconContainer">
                      <a href="cart.html" class="cart-icon-link">
                          <div class="liquid-glass-cart-icon">
                              <i class="fas fa-shopping-cart"></i>
                              <span class="cart-badge" id="cartBadge">0</span>
                          </div>
                      </a>
                  </div>
          </div>
      </div>
  </div>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Loading State -->
        <div id="loading-state" class="loading-container">
            <div class="loading-spinner">
                <i class="fas fa-spinner fa-spin"></i>
                <p>جاري تحميل تفاصيل المنتج...</p>
            </div>
        </div>

        <!-- Error State -->
        <div id="error-state" class="error-container" style="display: none;">
            <div class="error-content">
                <i class="fas fa-exclamation-triangle"></i>
                <h2>خطأ في تحميل المنتج</h2>
                <p>لم نتمكن من العثور على المنتج المطلوب.</p>
                <a href="store.html" class="btn">العودة للمتجر</a>
            </div>
        </div>

        <!-- Product Details -->
        <div class="product-details-container" id="product-content" style="display: none;">
            <!-- Left Column: Gallery -->
            <div class="product-gallery" id="product-gallery">
                <div class="main-image-wrapper" id="main-image-wrapper">
                    <div id="main-media-content" class="main-media-content">
                        <img id="main-image" src="" alt="صورة المنتج الرئيسية" class="main-image">
                    </div>
                    <div class="overlay-zoom">
                        <div style="display:flex;gap:8px;align-items:center;">
                            <button class="btn btn-small" style="background:rgba(255,255,255,0.03);border:none;color:var(--text-primary);padding:8px;border-radius:10px;cursor:pointer;">
                                <i class="fa-regular fa-heart"></i>
                            </button>
                            <button class="btn btn-small" id="product-share-image" style="background:rgba(255,255,255,0.03);border:none;color:var(--text-primary);padding:8px;border-radius:10px;cursor:pointer;">
                                <i class="fa-solid fa-share"></i>
                            </button>
                        </div>
                        <button id="toggle-fullscreen" class="btn btn-small" title="تكبير الشاشة" style="margin-inline-start:6px;">
                            <i class="fa-solid fa-expand"></i>
                        </button>
                    </div>
                </div>
                <!-- main arrows -->
                <button class="slide-arrow left" id="slide-prev" aria-label="السابق">
                    <i class="fa-solid fa-chevron-left"></i>
                </button>
                <button class="slide-arrow right" id="slide-next" aria-label="التالي">
                    <i class="fa-solid fa-chevron-right"></i>
                </button>
                <div class="thumbnail-strip" id="thumbnail-strip">
                    <button class="thumb-scroll prev" id="thumb-prev" aria-label="الشرائح السابقة"><i class="fa-solid fa-chevron-left"></i></button>
                    <div class="thumbnail-gallery" id="thumbnail-gallery">
                    <!-- Thumbnails -->
                    </div>
                    <button class="thumb-scroll next" id="thumb-next" aria-label="الشرائح التالية"><i class="fa-solid fa-chevron-right"></i></button>
                </div>
            </div>

            <!-- Right Column: Info -->
            <div class="product-info">
                <div class="product-header">
                    <div class="product-breadcrumb" id="product-breadcrumb">الرئيسية / المتجر / <span id="product-category-breadcrumb">فئة المنتج</span></div>
                    <div class="meta-row">
                        <div class="product-category" id="product-category">فئة المنتج</div>
                        <div class="product-badge" id="product-badge">عرض خاص</div>
                    </div>
                    <h1 class="product-title" id="product-title">اسم المنتج</h1>
                </div>

                <div class="product-rating" id="product-rating">
                    <div class="stars"></div>
                    <span class="rating-text">(0 تقييم)</span>
                </div>

                <p class="product-short-description" id="product-description">
                    وصف مختصر وجذاب للمنتج يعرض أبرز خصائصه.
                </p>

                <div class="product-price" id="product-price">
                    <span class="old-price" id="product-old-price" style="display:none; margin-inline-end: 8px; color: #b6b6c6; text-decoration: line-through; font-size:1.1rem;">0 ج.م</span>
                    <span class="current-price">0 ج.م</span>
                </div>

                <div class="product-meta" style="margin-top:6px;margin-bottom:8px;display:flex;gap:8px;align-items:center;">
                    <div class="product-availability" id="product-availability">متوفر الآن</div>
                    <div class="product-share" id="product-share">شارك: <i class="fa-solid fa-share" style="margin-inline-start:6px"></i></div>
                </div>
                <div class="product-actions">
                    <div class="quantity-selector">
                        <label>الكمية</label>
                        <div class="quantity-controls">
                            <button id="decrease-qty">-</button>
                            <input type="number" id="quantity" value="1" min="1" readonly>
                            <button id="increase-qty">+</button>
                        </div>
                    </div>
                    <button class="btn btn-primary" id="add-to-cart-btn">
                        <i class="fas fa-cart-plus"></i> أضف إلى السلة
                    </button>
                </div>
                <button class="btn btn-secondary" id="buy-now-btn">
                    <i class="fas fa-wallet"></i> اشتري الآن
                </button>
            </div>
        </div>

        <!-- Additional Info Tabs -->
        <div class="product-additional-info" id="product-additional-info" style="display: none;">
            <div class="tabs">
                <button class="tab-link active" data-tab="details">الوصف التفصيلي</button>
                <button class="tab-link" data-tab="reviews">التقييمات (<span id="reviews-count">0</span>)</button>
                <button class="tab-link" data-tab="comments">التعليقات (<span id="comments-count">0</span>)</button>
            </div>
            <div class="tab-content-wrapper">
                <!-- Description Tab -->
                <div id="details" class="tab-content active">
                    <p id="full-description">تفاصيل كاملة عن المنتج...</p>
                    <div class="product-video" id="product-video-container"></div>
                </div>

                <!-- Reviews Tab -->
                <div id="reviews" class="tab-content">
                    <div class="reviews-section">
                        <div class="reviews-summary">
                                <div class="average-rating">
                                    <span class="rating-number" id="avg-rating">0.0</span>
                                    <div class="rating-stars" id="avg-rating-stars"></div>
                                    <p class="rating-text">بناءً على <span id="total-reviews">0</span> تقييم</p>
                                </div>
                                <div class="rating-distribution" id="rating-distribution"></div>
                            </div>
                        </div>

                        <div class="add-review-section">
                            <h3>أضف تقييمك</h3>
                            <form id="review-form" class="review-form">
                                <div class="form-group">
                                    <label>التقييم</label>
                                    <div class="star-rating-input">
                                        <i class="far fa-star" data-rating="1"></i>
                                        <i class="far fa-star" data-rating="2"></i>
                                        <i class="far fa-star" data-rating="3"></i>
                                        <i class="far fa-star" data-rating="4"></i>
                                        <i class="far fa-star" data-rating="5"></i>
                                    </div>
                                    <input type="hidden" id="review-rating" name="rating" required>
                                </div>
                                <div class="form-group">
                                    <label for="review-title">عنوان التقييم</label>
                                    <input type="text" id="review-title" name="title" placeholder="مثال: منتج رائع" required>
                                </div>
                                <div class="form-group">
                                    <label for="review-text">تقييمك</label>
                                    <textarea id="review-text" name="text" rows="4" placeholder="شارك تجربتك مع المنتج..." required></textarea>
                                </div>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-paper-plane"></i>
                                    إرسال التقييم
                                </button>
                            </form>
                        </div>

                        <div class="reviews-list" id="reviews-list">
                            <h3>جميع التقييمات</h3>
                            <div id="reviews-container"></div>
                        </div>
                    </div>
                </div>

                <!-- Comments Tab -->
                <div id="comments" class="tab-content">
                    <div class="comments-section">
                        <div class="add-comment-section">
                            <h3>أضف تعليقك</h3>
                            <form id="comment-form" class="comment-form">
                                <div class="form-group">
                                    <textarea id="comment-text" name="text" rows="3" placeholder="اكتب تعليقك هنا..." required></textarea>
                                </div>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-comment"></i>
                                    إرسال التعليق
                                </button>
                            </form>
                        </div>

                        <div class="comments-list" id="comments-list">
                            <h3>جميع التعليقات</h3>
                            <div id="comments-container"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Related Products Section -->
        <div class="related-products-section" id="related-products-section" style="display: none;">
            <div class="container">
                <div class="section-header">
                    <h2>منتجات ذات صلة</h2>
                    <p>منتجات قد تعجبك أيضاً</p>
                </div>
                <div class="related-products-grid" id="related-products-grid">
                    <!-- Products will be loaded here -->
                </div>
            </div>
        </div>
    </main>

    <!-- Mobile sticky action bar -->
    <div class="action-bar-mobile">
        <button class="btn btn-primary" id="add-to-cart-btn-mobile"><i class="fas fa-cart-plus"></i> أضف إلى السلة</button>
        <button class="btn btn-secondary" id="buy-now-btn-mobile"><i class="fas fa-wallet"></i> اشتري الآن</button>
    </div>

    <!-- Footer -->
    <footer id="footer">
        <div class="footer-container">
            <div class="footer-main">
                <div class="footer-brand">
                    <div class="brand-logo">
                        <img src="img/loogo.png" alt="TWM3 Logo" />
                        <div class="logo-glow"></div>
                    </div>
                    <h3>TWM3</h3>
                    <p>فريق عمل متخصص في البرمجة والأمن السيبراني</p>
                </div>

                <div class="footer-links">
                    <h4>روابط سريعة</h4>
                    <ul>
                        <li><a href="index.html">الرئيسية</a></li>
                        <li><a href="courses.html">الكورسات</a></li>
                        <li><a href="portfolio.html">مشاريعنا</a></li>
                        <li><a href="roadmap.html">مسارات التعلم</a></li>
                    </ul>
                </div>

                <div class="footer-social">
                    <h4>تابعنا</h4>
                    <div class="social-links">
                        <a href="https://facebook.com/teamworkm3" target="_blank" class="social-link" title="Facebook">
                            <img src="img/Facebook-1.png" alt="Facebook" />
                        </a>
                        <a href="https://youtube.com/@twm3" target="_blank" class="social-link" title="YouTube">
                            <img src="img/Youtube-1.png" alt="YouTube" />
                        </a>
                        <a href="https://instagram.com/mo_hussien_20" target="_blank" class="social-link" title="Instagram">
                            <img src="img/Instagram-1.png" alt="Instagram" />
                        </a>
                        <a href="https://t.me/teamworkm3" target="_blank" class="social-link" title="Telegram">
                            <img src="img/Telegram-1.png" alt="Telegram" />
                        </a>
                    </div>
                </div>
            </div>

            <div class="footer-copyright">
                <p>&copy; <span id="yearData"></span> جميع الحقوق محفوظة لفريق <span class="brand-highlight">TWM3</span> <i class="fas fa-heart heart"></i></p>
            </div>

            <div class="footer-bg-effects">
                <div class="floating-particles">
                    <div class="particle"></div>
                    <div class="particle"></div>
                    <div class="particle"></div>
                    <div class="particle"></div>
                    <div class="particle"></div>
                    <div class="particle"></div>
                </div>
                <div class="wave-effect"></div>
            </div>
        </div>
    </footer>

    <script src="js/theme-manager.js"></script>
    <script src="js/ui-toast.js"></script>
    <script src="app.js"></script>
    <script src="https://cdn.plyr.io/3.7.8/plyr.js"></script>
    <script src="js/product-details.js"></script>
</body>
</html>
