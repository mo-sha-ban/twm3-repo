<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' blob: https://www.youtube.com https://www.youtube-nocookie.com https://cdn.plyr.io https://cdnjs.cloudflare.com https://www.google.com https://apis.google.com https://ssl.gstatic.com https://www.gstatic.com https://*.youtube.com https://*.gstatic.com; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://fonts.googleapis.com; img-src 'self' data: https:; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com; connect-src 'self' https: http:;">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/courses-carousel.css">
    <!-- <link rel="stylesheet" href="css/all.min.css"> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Marhey:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" href="img/loogo.png">
    <title>TWM3 | الكورسات</title>
    <style>
        :root {
            --courses-bg: #e5e7eb;
            --courses-glass-bg: rgba(255, 255, 255, 0.68);
            --courses-glass-border: rgba(148, 163, 184, 0.45);
            --courses-glass-shadow: 0 24px 60px rgba(15, 23, 42, 0.22);
            --courses-surface: #ffffff;
            --courses-surface-soft: rgba(255, 255, 255, 0.82);
            --courses-border-subtle: rgba(148, 163, 184, 0.25);
            --courses-border-strong: rgba(148, 163, 184, 0.55);
            --courses-text-main: #020617;
            --courses-text-muted: #6b7280;
            --courses-primary: #2563eb;
            --courses-primary-soft: rgba(37, 99, 235, 0.10);
            --courses-primary-strong: rgba(37, 99, 235, 0.30);
            --courses-radius-xl: 26px;
            --courses-radius-lg: 20px;
            --courses-radius-md: 14px;
            --courses-shadow-soft: 0 20px 50px rgba(15, 23, 42, 0.10);
            --courses-shadow-strong: 0 28px 70px rgba(15, 23, 42, 0.22);
            --courses-transition-fast: 0.18s ease-out;
            --courses-transition-medium: 0.28s ease;
        }

        /* دعم الوضع الليلي مع glassmorphism */
        body.dark,
        :root.dark-theme {
            --courses-bg: #020617;
            --courses-glass-bg: rgba(15, 23, 42, 0.74);
            --courses-glass-border: rgba(148, 163, 184, 0.38);
            --courses-glass-shadow: 0 26px 80px rgba(0, 0, 0, 0.88);
            --courses-surface: rgba(15, 23, 42, 0.96);
            --courses-surface-soft: rgba(15, 23, 42, 0.86);
            --courses-border-subtle: rgba(148, 163, 184, 0.32);
            --courses-border-strong: rgba(148, 163, 184, 0.70);
            --courses-text-main: #e5e7eb;
            --courses-text-muted: #9ca3af;
            --courses-primary-soft: rgba(59, 130, 246, 0.24);
            --courses-primary-strong: rgba(59, 130, 246, 0.55);
            --courses-shadow-soft: 0 26px 70px rgba(15, 23, 42, 0.85);
            --courses-shadow-strong: 0 30px 90px rgba(15, 23, 42, 0.96);
        }

        body {
            background:
                radial-gradient(circle at top left, rgba(59, 130, 246, 0.18), transparent 55%),
                radial-gradient(circle at bottom right, rgba(16, 185, 129, 0.18), transparent 60%),
                var(--courses-bg);
        }

        .courses-page {
            min-height: 100vh;
            padding: 118px 0 70px;
            display: flex;
            align-items: flex-start;
            justify-content: center;
        }

        .courses-shell {
            max-width: 1240px;
            width: 100%;
            margin: 0 auto;
            padding: 0 16px;
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        /* هيدر القسم glass */
        .courses-header {
            display: flex;
            flex-direction: column;
            gap: 16px;
            padding: 22px 24px 18px;
            border-radius: var(--courses-radius-xl);
            background:
                radial-gradient(circle at top left, rgba(59, 130, 246, 0.18), transparent 60%),
                radial-gradient(circle at bottom right, rgba(16, 185, 129, 0.18), transparent 55%),
                var(--courses-glass-bg);
            border: 1px solid var(--courses-glass-border);
            box-shadow: var(--courses-glass-shadow);
            backdrop-filter: blur(18px) saturate(150%);
            -webkit-backdrop-filter: blur(18px) saturate(150%);
            color: var(--courses-text-main);
            position: relative;
            overflow: hidden;
        }

        .courses-header::before,
        .courses-header::after {
            content: "";
            position: absolute;
            border-radius: 999px;
            filter: blur(26px);
            opacity: 0.55;
            pointer-events: none;
        }

        .courses-header::before {
            width: 260px;
            height: 260px;
            top: -140px;
            left: -80px;
            background: radial-gradient(circle at center, rgba(59, 130, 246, 0.75), transparent 70%);
        }

        .courses-header::after {
            width: 240px;
            height: 240px;
            bottom: -120px;
            right: -60px;
            background: radial-gradient(circle at center, rgba(16, 185, 129, 0.70), transparent 70%);
        }

        .courses-header-main {
            position: relative;
            z-index: 1;
            display: flex;
            flex-wrap: wrap;
            gap: 14px 26px;
            align-items: center;
            justify-content: space-between;
        }

        .courses-title-block h1 {
            font-size: clamp(24px, 3vw, 30px);
            font-weight: 800;
            letter-spacing: .02em;
            margin: 0 0 4px;
        }

        .courses-title-block p {
            margin: 0;
            font-size: 13px;
            color: var(--courses-text-muted);
        }

        .courses-metrics {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            font-size: 12px;
            color: var(--courses-text-main);
        }

        .courses-metric-pill {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 10px;
            border-radius: 999px;
            background: rgba(255, 255, 255, 0.45);
            border: 1px solid rgba(148, 163, 184, 0.55);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        body.dark .courses-metric-pill,
        :root.dark-theme .courses-metric-pill {
            background: rgba(15, 23, 42, 0.72);
            border-color: rgba(148, 163, 184, 0.55);
        }

        .courses-metric-pill i {
            font-size: 13px;
            color: #38bdf8;
        }

        /* شريط الفلترة والبحث glassy */
        .courses-toolbar {
            position: relative;
            z-index: 1;
            margin-top: 6px;
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            align-items: center;
            justify-content: space-between;
        }

        .courses-search {
            flex: 1 1 260px;
            max-width: 420px;
            position: relative;
        }

        .courses-search input {
            width: 100%;
            padding: 10px 40px 10px 12px;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.7);
            background: rgba(15, 23, 42, 0.04);
            color: var(--courses-text-main);
            font-size: 13px;
            outline: none;
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            transition: border-color var(--courses-transition-fast),
                box-shadow var(--courses-transition-fast),
                background var(--courses-transition-fast);
        }

        body.dark .courses-search input,
        :root.dark-theme .courses-search input {
            background: rgba(15, 23, 42, 0.65);
            color: #e5e7eb;
        }

        .courses-search input::placeholder {
            color: rgba(148, 163, 184, 0.85);
        }

        .courses-search input:focus {
            border-color: #60a5fa;
            box-shadow: 0 0 0 1px rgba(96, 165, 250, 0.6);
            background: rgba(15, 23, 42, 0.05);
        }

        .courses-search i {
            position: absolute;
            right: 14px;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(148, 163, 184, 0.9);
            font-size: 14px;
        }

        .courses-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: flex-end;
        }

        .filter-chip {
            padding: 7px 12px;
            border-radius: 999px;
            font-size: 12px;
            border: 1px solid rgba(148, 163, 184, 0.55);
            background: rgba(255, 255, 255, 0.45);
            color: var(--courses-text-main);
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            transition: background var(--courses-transition-fast),
                border-color var(--courses-transition-fast),
                transform var(--courses-transition-fast);
        }

        body.dark .filter-chip,
        :root.dark-theme .filter-chip {
            background: rgba(15, 23, 42, 0.75);
            color: #e5e7eb;
        }

        .filter-chip span.dot {
            width: 7px;
            height: 7px;
            border-radius: 999px;
            background: rgba(148, 163, 184, 0.9);
        }

        .filter-chip.active {
            border-color: rgba(96, 165, 250, 0.95);
            background: rgba(37, 99, 235, 0.22);
            transform: translateY(-1px);
        }

        .filter-chip.active span.dot {
            background: #22c55e;
        }

        /* قسم الكورسات - كروت glass */
        .courses-grid-shell {
            margin-top: 8px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .courses-grid-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 13px;
            color: var(--courses-text-muted);
            padding: 0 4px;
        }

        .courses-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
            gap: 18px;
        }

        .course-card {
            position: relative;
            border-radius: var(--courses-radius-lg);
            background:
                radial-gradient(circle at top left, rgba(59, 130, 246, 0.18), transparent 60%),
                radial-gradient(circle at bottom right, rgba(16, 185, 129, 0.16), transparent 60%),
                var(--courses-glass-bg);
            border: 1px solid var(--courses-glass-border);
            box-shadow: var(--courses-shadow-soft);
            padding: 14px 14px 16px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            overflow: hidden;
            backdrop-filter: blur(18px) saturate(150%);
            -webkit-backdrop-filter: blur(18px) saturate(150%);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .course-paid-badge {
            position: relative;
            z-index: 1;
            padding: 6px 12px;
            border-radius: 999px;
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: #fff;
            font-size: 11px;
            font-weight: 800;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            box-shadow: 0 8px 18px rgba(245, 158, 11, 0.55);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            white-space: nowrap;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .course-card::before {
            content: "";
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at top left, rgba(255, 255, 255, 0.55), transparent 60%);
            opacity: 0;
            pointer-events: none;
            transition: opacity var(--courses-transition-medium);
        }

        .course-card:hover {
            transform: translateY(-5px) translateZ(0);
            box-shadow: var(--courses-shadow-strong);
            border-color: var(--courses-border-strong);
        }

        .course-card:hover::before {
            opacity: 0.5;
        }

        .course-card-header {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            align-items: flex-start;
        }

        .course-icon {
            width: 40px;
            height: 40px;
            border-radius: 16px;
            background: rgba(15, 23, 42, 0.12);
            display: grid;
            place-items: center;
            color: var(--courses-primary);
            flex-shrink: 0;
            font-size: 18px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        body.dark .course-icon,
        :root.dark-theme .course-icon {
            background: rgba(15, 23, 42, 0.70);
            color: #60a5fa;
        }

        .course-title-area {
            flex: 1;
            min-width: 0;
        }

        .course-title-area h2 {
            margin: 0 0 2px;
            font-size: 15px;
            font-weight: 700;
            color: var(--courses-text-main);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .course-title-area .course-instructor {
            margin: 0;
            font-size: 12px;
            color: var(--courses-text-muted);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .course-featured-badge {
            position: relative;
            z-index: 1;
            padding: 4px 10px;
            border-radius: 999px;
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.95), rgba(250, 204, 21, 0.98));
            color: #78350f;
            font-size: 11px;
            font-weight: 800;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            box-shadow: 0 8px 18px rgba(251, 191, 36, 0.55);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            white-space: nowrap;
        }

        .course-description {
            font-size: 12px;
            color: var(--courses-text-muted);
            line-height: 1.7;
            max-height: 10em;
            overflow: hidden;
        }

        .course-meta-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
            margin-top: 4px;
            gap: 8px;
        }

        .course-price-pill {
            padding: 5px 12px;
            border-radius: 999px;
            border: 1px solid var(--courses-primary-strong);
            background: var(--courses-primary-soft);
            display: inline-flex;
            align-items: center;
            gap: 6px;
            color: var(--courses-text-main);
            font-weight: 600;
            white-space: nowrap;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .course-price-pill.free {
            border-color: rgba(34, 197, 94, 0.9);
            background: rgba(22, 163, 74, 0.12);
            color: #16a34a;
        }

        .course-cta {
            margin-top: 8px;
            display: flex;
            justify-content: space-between;
            gap: 10px;
            align-items: center;
        }

        .course-card.paid-course .course-cta {
            gap: 8px;
        }

        .course-card.paid-course .course-cta a:first-child {
            flex: 1.5;
        }

        .course-cta a {
            flex: 1;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            padding: 8px 0;
            border-radius: 999px;
            border: none;
            background: linear-gradient(135deg, var(--courses-primary), #1d4ed8);
            color: #f9fafb;
            font-size: 13px;
            font-weight: 700;
            text-decoration: none;
            cursor: pointer;
            transition: transform var(--courses-transition-fast),
                box-shadow var(--courses-transition-fast),
                background var(--courses-transition-fast);
            box-shadow: 0 12px 30px rgba(37, 99, 235, 0.55);
        }

        .course-cta a:hover {
            transform: translateY(-1px);
            box-shadow: 0 16px 36px rgba(37, 99, 235, 0.65);
        }

        /* ============================================
           Paid Course - Premium 3D Liquid Glass Design
           ============================================ */
        .course-card.paid-course {
            background:
                linear-gradient(135deg, rgba(255, 215, 0, 0.08) 0%, rgba(212, 175, 55, 0.12) 100%),
                rgba(255, 255, 255, 0.75);
            border: 2px solid rgba(255, 215, 0, 0.35);
            box-shadow:
                0 25px 70px rgba(212, 175, 55, 0.3),
                0 0 0 1px rgba(255, 255, 255, 0.5) inset,
                0 10px 40px rgba(255, 215, 0, 0.2);
            position: relative;
            overflow: hidden;
            transform-style: preserve-3d;
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            perspective: 1000px;
        }

        body.dark .course-card.paid-course,
        :root.dark-theme .course-card.paid-course {
            background:
                linear-gradient(135deg, rgba(255, 215, 0, 0.15) 0%, rgba(212, 175, 55, 0.2) 100%),
                rgba(15, 23, 42, 0.85);
            border: 2px solid rgba(255, 215, 0, 0.45);
        }

        /* 3D Liquid Glass Effect */
        .course-card.paid-course::before {
            content: '';
            position: absolute;
            top: -60%;
            left: -60%;
            width: 220%;
            height: 220%;
            background:
                radial-gradient(circle at 30% 30%, rgba(255, 215, 0, 0.4) 0%, transparent 50%),
                radial-gradient(circle at 70% 70%, rgba(250, 218, 94, 0.3) 0%, transparent 50%);
            animation: liquidFloat 8s ease-in-out infinite;
            z-index: 0;
            filter: blur(40px);
            opacity: 0.6;
        }

        @keyframes liquidFloat {

            0%,
            100% {
                transform: translate(-50%, -50%) rotate(0deg) scale(1);
                opacity: 0.5;
            }

            33% {
                transform: translate(-45%, -55%) rotate(120deg) scale(1.1);
                opacity: 0.7;
            }

            66% {
                transform: translate(-55%, -45%) rotate(240deg) scale(0.95);
                opacity: 0.6;
            }
        }

        /* 3D Depth Layers */
        .course-card.paid-course::after {
            content: '';
            position: absolute;
            inset: 0;
            background:
                linear-gradient(135deg, rgba(255, 255, 255, 0.3) 0%, transparent 50%),
                linear-gradient(225deg, rgba(255, 215, 0, 0.1) 0%, transparent 50%);
            z-index: 0;
            pointer-events: none;
            border-radius: inherit;
        }

        .course-card.paid-course>* {
            position: relative;
            z-index: 1;
        }

        .course-card.paid-course:hover {
            transform: translateY(-12px) rotateX(2deg) scale(1.02);
            border-color: rgba(255, 215, 0, 0.6);
            box-shadow:
                0 35px 100px rgba(212, 175, 55, 0.45),
                0 0 0 2px rgba(255, 255, 255, 0.6) inset,
                0 15px 60px rgba(255, 215, 0, 0.35),
                0 5px 20px rgba(255, 215, 0, 0.2);
        }

        .course-card.paid-course .course-icon {
            background: linear-gradient(135deg, #FFD700 0%, #D4AF37 50%, #FADA5E 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 4px 12px rgba(212, 175, 55, 0.5));
            position: relative;
        }

        .course-card.paid-course .course-icon::before {
            content: '';
            position: absolute;
            inset: -4px;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(212, 175, 55, 0.3));
            border-radius: inherit;
            z-index: -1;
            filter: blur(8px);
        }

        .course-card.paid-course .course-title-area h2 {
            background: linear-gradient(135deg, #D4AF37 0%, #FFD700 50%, #FADA5E 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 2px 8px rgba(212, 175, 55, 0.3);
        }

        /* Premium Features Section */
        .paid-course-features {
            margin: 12px 0;
            padding: 14px;
            background:
                linear-gradient(135deg, rgba(255, 215, 0, 0.08) 0%, rgba(239, 223, 187, 0.12) 100%),
                rgba(255, 255, 255, 0.5);
            border-radius: 12px;
            border: 1px solid rgba(255, 215, 0, 0.25);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        body.dark .paid-course-features,
        :root.dark-theme .paid-course-features {
            background:
                linear-gradient(135deg, rgba(255, 215, 0, 0.12) 0%, rgba(212, 175, 55, 0.15) 100%),
                rgba(15, 23, 42, 0.6);
        }

        .paid-course-features h3 {
            font-size: 13px;
            font-weight: 800;
            color: #D4AF37;
            margin: 0 0 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .paid-course-features h3 i {
            font-size: 14px;
            color: #FFD700;
        }

        .paid-course-features ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .paid-course-features li {
            font-size: 11px;
            color: var(--courses-text-main);
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 8px;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 8px;
            border: 1px solid rgba(255, 215, 0, 0.15);
            transition: all 0.2s ease;
        }

        body.dark .paid-course-features li,
        :root.dark-theme .paid-course-features li {
            background: rgba(15, 23, 42, 0.4);
            color: #e5e7eb;
        }

        .paid-course-features li:hover {
            background: rgba(255, 215, 0, 0.15);
            border-color: rgba(255, 215, 0, 0.3);
            transform: translateX(4px);
        }

        .paid-course-features li i {
            font-size: 10px;
            color: #D4AF37;
            flex-shrink: 0;
        }

        /* Promotional Video Section */
        .paid-course-promo {
            margin: 12px 0;
            position: relative;
            border-radius: 12px;
            overflow: hidden;
            background:
                linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(212, 175, 55, 0.15) 100%),
                rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(255, 215, 0, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .paid-course-promo:hover {
            border-color: rgba(255, 215, 0, 0.5);
            box-shadow: 0 8px 24px rgba(212, 175, 55, 0.3);
            transform: translateY(-2px);
        }

        body.dark .paid-course-promo,
        :root.dark-theme .paid-course-promo {
            background:
                linear-gradient(135deg, rgba(255, 215, 0, 0.06) 0%, rgba(212, 175, 55, 0.08) 100%),
                rgba(30, 41, 59, 0.4);
            border: 1px solid rgba(255, 215, 0, 0.25);
        }

        body.dark .paid-course-promo:hover,
        :root.dark-theme .paid-course-promo:hover {
            border-color: rgba(255, 215, 0, 0.45);
            box-shadow: 0 8px 24px rgba(212, 175, 55, 0.2);
        }

        .paid-course-promo-thumbnail {
            position: relative;
            width: 100%;
            padding-top: 56.25%;
            /* 16:9 Aspect Ratio */
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(212, 175, 55, 0.3));
            overflow: hidden;
        }

        body.dark .paid-course-promo-thumbnail,
        :root.dark-theme .paid-course-promo-thumbnail {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(212, 175, 55, 0.15));
        }

        .paid-course-promo-thumbnail img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.4s ease;
        }

        .paid-course-promo:hover .paid-course-promo-thumbnail img {
            transform: scale(1.08);
        }

        .promo-placeholder {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(212, 175, 55, 0.25));
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(212, 175, 55, 0.5);
            font-size: 28px;
        }

        body.dark .promo-placeholder,
        :root.dark-theme .promo-placeholder {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.08), rgba(212, 175, 55, 0.12));
            color: rgba(255, 215, 0, 0.4);
        }

        .paid-course-promo-play {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background:
                linear-gradient(135deg, rgba(255, 215, 0, 0.95), rgba(212, 175, 55, 0.95));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow:
                0 8px 24px rgba(212, 175, 55, 0.5),
                0 0 0 8px rgba(255, 215, 0, 0.2);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .paid-course-promo:hover .paid-course-promo-play {
            transform: translate(-50%, -50%) scale(1.1);
            box-shadow:
                0 12px 32px rgba(212, 175, 55, 0.6),
                0 0 0 12px rgba(255, 215, 0, 0.3);
        }

        body.dark .paid-course-promo-play,
        :root.dark-theme .paid-course-promo-play {
            background:
                linear-gradient(135deg, rgba(255, 215, 0, 0.85), rgba(212, 175, 55, 0.85));
            box-shadow:
                0 8px 24px rgba(212, 175, 55, 0.35),
                0 0 0 8px rgba(255, 215, 0, 0.15);
        }

        body.dark .paid-course-promo:hover .paid-course-promo-play,
        :root.dark-theme .paid-course-promo:hover .paid-course-promo-play {
            box-shadow:
                0 12px 32px rgba(212, 175, 55, 0.4),
                0 0 0 12px rgba(255, 215, 0, 0.2);
        }

        .paid-course-promo-play i {
            font-size: 24px;
            color: #fff;
            margin-left: 4px;
        }

        .paid-course-promo-label {
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            font-size: 11px;
            font-weight: 700;
            color: #D4AF37;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        body.dark .paid-course-promo-label,
        :root.dark-theme .paid-course-promo-label {
            background: rgba(15, 23, 42, 0.6);
            color: #FADA5E;
        }

        .paid-course-promo-label i {
            font-size: 12px;
        }

        .course-card.paid-course .course-cta a {
            background: linear-gradient(135deg, #FFD700 0%, #D4AF37 50%, #FADA5E 100%);
            box-shadow:
                0 12px 30px rgba(212, 175, 55, 0.5),
                0 0 0 2px rgba(255, 255, 255, 0.3) inset;
            position: relative;
            overflow: hidden;
        }

        .course-card.paid-course .course-cta a::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s ease;
        }

        .course-card.paid-course .course-cta a:hover::before {
            left: 100%;
        }

        .course-card.paid-course .course-cta a:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow:
                0 16px 40px rgba(212, 175, 55, 0.6),
                0 0 0 3px rgba(255, 255, 255, 0.4) inset;
        }

        .course-card.paid-course .course-price-pill:not(.free) {
            background: linear-gradient(135deg, #FFD700 0%, #D4AF37 100%);
            color: #78350f;
            border: 2px solid rgba(255, 255, 255, 0.4);
            box-shadow:
                0 4px 16px rgba(212, 175, 55, 0.4),
                0 0 0 1px rgba(255, 255, 255, 0.3) inset;
            font-weight: 800;
            animation: pricePulse 2s ease-in-out infinite;
        }

        .course-card.paid-course .course-paid-badge {
            background: linear-gradient(135deg, #D4AF37 0%, #FFD700 100%);
            box-shadow: 0 8px 18px rgba(212, 175, 55, 0.55);
            color: #78350f;
        }

        /* ============================================
                   Featured Course - Liquid Glass Design
                   ============================================ */
        .course-card.featured-course {
            background:
                linear-gradient(135deg, rgba(139, 92, 246, 0.08) 0%, rgba(59, 130, 246, 0.12) 100%),
                rgba(255, 255, 255, 0.75);
            border: 2px solid rgba(139, 92, 246, 0.35);
            box-shadow:
                0 25px 70px rgba(139, 92, 246, 0.3),
                0 0 0 1px rgba(255, 255, 255, 0.5) inset,
                0 10px 40px rgba(139, 92, 246, 0.2);
            position: relative;
            overflow: hidden;
            transform-style: preserve-3d;
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            perspective: 1000px;
        }

        body.dark .course-card.featured-course,
        :root.dark-theme .course-card.featured-course {
            background:
                linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(59, 130, 246, 0.2) 100%),
                rgba(15, 23, 42, 0.85);
            border: 2px solid rgba(139, 92, 246, 0.45);
        }

        /* Liquid Glass Effect for Featured */
        .course-card.featured-course::before {
            content: '';
            position: absolute;
            top: -60%;
            left: -60%;
            width: 220%;
            height: 220%;
            background:
                radial-gradient(circle at 30% 30%, rgba(139, 92, 246, 0.4) 0%, transparent 50%),
                radial-gradient(circle at 70% 70%, rgba(124, 58, 237, 0.3) 0%, transparent 50%);
            animation: liquidFloatFeatured 8s ease-in-out infinite;
            z-index: 0;
            filter: blur(40px);
            opacity: 0.6;
        }

        @keyframes liquidFloatFeatured {

            0%,
            100% {
                transform: translate(-50%, -50%) rotate(0deg) scale(1);
                opacity: 0.5;
            }

            33% {
                transform: translate(-45%, -55%) rotate(120deg) scale(1.1);
                opacity: 0.7;
            }

            66% {
                transform: translate(-55%, -45%) rotate(240deg) scale(0.95);
                opacity: 0.6;
            }
        }

        /* 3D Depth Layers for Featured */
        .course-card.featured-course::after {
            content: '';
            position: absolute;
            inset: 0;
            background:
                linear-gradient(135deg, rgba(255, 255, 255, 0.3) 0%, transparent 50%),
                linear-gradient(225deg, rgba(139, 92, 246, 0.1) 0%, transparent 50%);
            z-index: 0;
            pointer-events: none;
            border-radius: inherit;
        }

        .course-card.featured-course>* {
            position: relative;
            z-index: 1;
        }

        .course-card.featured-course:hover {
            transform: translateY(-12px) rotateX(2deg) scale(1.02);
            border-color: rgba(139, 92, 246, 0.6);
            box-shadow:
                0 35px 100px rgba(139, 92, 246, 0.45),
                0 0 0 2px rgba(255, 255, 255, 0.6) inset,
                0 15px 60px rgba(139, 92, 246, 0.35),
                0 5px 20px rgba(139, 92, 246, 0.2);
        }

        .course-card.featured-course .course-icon {
            background: linear-gradient(135deg, #8B5CF6 0%, #3B82F6 50%, #6366F1 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 4px 12px rgba(139, 92, 246, 0.5));
            position: relative;
        }

        .course-card.featured-course .course-icon::before {
            content: '';
            position: absolute;
            inset: -4px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(59, 130, 246, 0.3));
            border-radius: inherit;
            z-index: -1;
            filter: blur(8px);
        }

        .course-card.featured-course .course-title-area h2 {
            background: linear-gradient(135deg, #7C3AED 0%, #3B82F6 50%, #6366F1 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);
        }

        .course-card.featured-course .course-featured-badge {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.95), rgba(124, 58, 237, 0.98));
            color: #e9d5ff;
            box-shadow: 0 8px 18px rgba(139, 92, 246, 0.55);
        }

        .course-card.featured-course .course-cta a {
            background: linear-gradient(135deg, #8B5CF6 0%, #3B82F6 50%, #6366F1 100%);
            box-shadow:
                0 12px 30px rgba(139, 92, 246, 0.5),
                0 0 0 2px rgba(255, 255, 255, 0.3) inset;
        }

        .course-card.featured-course .course-cta a:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow:
                0 16px 40px rgba(139, 92, 246, 0.6),
                0 0 0 3px rgba(255, 255, 255, 0.4) inset;
        }

        /* Udemy Link Button */
        .udemy-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            padding: 8px 14px;
            border-radius: 999px;
            background: linear-gradient(135deg, #a855f7 0%, #7c3aed 100%);
            color: white;
            font-size: 12px;
            font-weight: 700;
            text-decoration: none;
            cursor: pointer;
            border: none;
            transition: all var(--courses-transition-fast);
            box-shadow: 0 8px 20px rgba(168, 85, 247, 0.4);
            flex-shrink: 0;
        }

        .udemy-link:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 12px 30px rgba(168, 85, 247, 0.6);
            background: linear-gradient(135deg, #9333ea 0%, #6d28d9 100%);
        }

        .udemy-link i {
            font-size: 13px;
        }

        /* بطاقة معلومات الكورس المدفوع */
        .paid-course-info-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background: linear-gradient(135deg, #ec4899 0%, #db2777 100%);
            color: white;
            padding: 8px 14px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 900;
            display: flex;
            align-items: center;
            gap: 6px;
            z-index: 10;
            box-shadow: 0 10px 25px rgba(236, 72, 153, 0.5);
            text-transform: uppercase;
            letter-spacing: 0.8px;
            animation: badgePulse 2s ease-in-out infinite;
        }

        @keyframes badgePulse {

            0%,
            100% {
                transform: scale(1);
                filter: brightness(1);
            }

            50% {
                transform: scale(1.05);
                filter: brightness(1.1);
            }
        }

        .course-card {
            position: relative;
        }

        /* تحسين ألوان الشارات */
        .course-paid-badge {
            animation: badgePop 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes badgePop {
            0% {
                opacity: 0;
                transform: scale(0.8) rotate(-10deg);
            }

            100% {
                opacity: 1;
                transform: scale(1) rotate(0deg);
            }
        }

        @keyframes pricePulse {

            0%,
            100% {
                box-shadow:
                    0 4px 16px rgba(99, 102, 241, 0.4),
                    0 0 0 1px rgba(255, 255, 255, 0.2) inset;
            }

            50% {
                box-shadow:
                    0 6px 24px rgba(99, 102, 241, 0.6),
                    0 0 0 2px rgba(255, 255, 255, 0.3) inset;
            }
        }

        .courses-state {
            padding: 36px 16px;
            text-align: center;
            color: var(--courses-text-muted);
            font-size: 14px;
        }

        .courses-spinner {
            width: 38px;
            height: 38px;
            border-radius: 999px;
            border: 3px solid rgba(148, 163, 184, 0.35);
            border-top-color: var(--courses-primary);
            margin: 0 auto 14px;
            animation: courses-spin 0.8s linear infinite;
        }

        @keyframes courses-spin {
            to {
                transform: rotate(360deg);
            }
        }

        .courses-error {
            color: #ef4444;
        }

        /* Responsive */
        @media (max-width: 900px) {
            .courses-header {
                padding: 16px 16px 14px;
            }

            .courses-toolbar {
                flex-direction: column;
                align-items: stretch;
            }

            .courses-filters {
                justify-content: flex-start;
            }
        }

        @media (max-width: 640px) {
            .courses-page {
                padding-top: 100px;
            }

            .courses-shell {
                padding: 0 12px;
            }

            .courses-grid {
                grid-template-columns: 1fr;
            }

            .course-card {
                padding: 12px 12px 14px;
            }
        }
    </style>
</head>

<body>
    <!-- -------------------------------------------Start Header-------------------------------- -->
    <div dir="rtl" class="header">
        <div class="container">
            <div class="logo">
                <a href="index.html"><img src="img/logo.png" alt="" /></a>
            </div>
            <div id="list" class="links">
                <ul>
                    <li><a href="index.html">الرئيسيه</a></li>
                    <li><a href="courses.html">الكورسات </a></li>
                    <li><a href="portfolio.html">مشاريعنا </a></li>
                    <li class="nav-dropdown"><a href="roadmap.html">مسارات التعلم <i
                                class="fa-solid fa-angle-down"></i></a>
                        <ul class="nav-dropdown-items">
                            <li><a href="frontendroadmap.html">Front End </a></li>
                            <li><a href="backendroadmap.html">Back End</a></li>
                            <li><a href="cybersecurityroadmap.html">Cyber security</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
            <div class="bars">
                <i id="bars" class="fa-solid fa-bars"></i>
            </div>
            <div class="icon">
                <div id="colorMode" class="theme">
                    <i class="fa-solid fa-moon moon"></i>
                    <i class="fa-solid fa-sun sun"></i>
                </div>
                <a href="store.html" aria-label="المتجر" title="المتجر"><i class="fa-solid fa-store store"></i></a>
                <a href="login.html" aria-label="تسجيل الدخول" title="تسجيل الدخول"><i
                        class="fa-solid fa-user user"></i></a>
            </div>
        </div>
    </div>
    <!-- ---------------------------------------------End Header--------------------------------------- -->

    <section class="courses-page">
        <div class="courses-shell">
            <header class="courses-header" aria-label="قائمة الكورسات">
                <div class="courses-header-main">
                    <div class="courses-title-block">
                        <h1>الكورسات المتاحة</h1>
                        <p>استكشف مكتبة الكورسات وتابع من حيث توقفت بسهولة.</p>
                    </div>
                    <div class="courses-metrics" id="coursesMetrics">
                        <div class="courses-metric-pill">
                            <i class="fa-solid fa-book-open"></i>
                            <span id="totalCoursesLabel">0 كورس</span>
                        </div>
                        <div class="courses-metric-pill">
                            <i class="fa-solid fa-star"></i>
                            <span id="featuredCoursesLabel">لا توجد كورسات مميزة</span>
                        </div>
                    </div>
                </div>
                <div class="courses-toolbar">
                    <div class="courses-search">
                        <input type="search" id="coursesSearch" placeholder="ابحث باسم الكورس أو المدرب..."
                            aria-label="بحث عن كورس" />
                        <i class="fa-solid fa-magnifying-glass"></i>
                    </div>
                    <div class="courses-filters">
                        <button class="filter-chip active" data-filter="all">
                            <span class="dot"></span>
                            الكل
                        </button>
                        <button class="filter-chip" data-filter="free">
                            <span class="dot"></span>
                            مجانـي
                        </button>
                        <button class="filter-chip" data-filter="paid">
                            <span class="dot"></span>
                            مدفوع
                        </button>
                        <button class="filter-chip" data-filter="featured">
                            <span class="dot"></span>
                            مميّز
                        </button>
                    </div>
                </div>
            </header>

            <div class="courses-grid-shell">
                <div class="courses-grid-header">
                    <span id="visibleCoursesLabel">جاري التحميل...</span>
                    <span>يمكنك الضغط على أي كارت لبدء متابعة الكورس.</span>
                </div>
                <div id="coursesGrid" class="courses-grid">
                    <div class="courses-state" id="coursesState">
                        <div class="courses-spinner" aria-hidden="true"></div>
                        <p>جاري تحميل الكورسات...</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Start Footer  -->
    <footer id="footer">
        <div class="footer-container">
            <div class="footer-main">
                <div class="footer-brand">
                    <div class="brand-logo">
                        <img src="img/loogo.png" alt="TWM3 Logo" />
                    </div>
                    <h3>TWM3</h3>
                    <p>فريق عمل متخصص في البرمجة والأمن السيبراني</p>
                </div>

                <div class="footer-links">
                    <h4>روابط سريعة</h4>
                    <ul>
                        <li><a href="index.html">الرئيسية</a></li>
                        <li><a href="courses.html">الكورسات</a></li>
                        <li><a href="portfolio.html">مشاريعنا</a></li>
                        <li><a href="roadmap.html">مسارات التعلم</a></li>
                    </ul>
                </div>

                <div class="footer-social">
                    <h4>تابعنا</h4>
                    <div class="social-links">
                        <a href="https://facebook.com/teamworkm3" target="_blank" class="social-link" title="Facebook">
                            <img src="img/Facebook-1.png" alt="Facebook" />
                        </a>
                        <a href="https://youtube.com/@twm3" target="_blank" class="social-link" title="YouTube">
                            <img src="img/Youtube-1.png" alt="YouTube" />
                        </a>
                        <a href="https://instagram.com/mo_hussien_20" target="_blank" class="social-link"
                            title="Instagram">
                            <img src="img/Instagram-1.png" alt="Instagram" />
                        </a>
                        <a href="https://t.me/teamworkm3" target="_blank" class="social-link" title="Telegram">
                            <img src="img/Telegram-1.png" alt="Telegram" />
                        </a>
                    </div>
                </div>
            </div>

            <div class="footer-copyright">
                <p>&copy; <span id="yearData"></span> جميع الحقوق محفوظة لفريق <span class="brand-highlight">TWM3</span>
                    <i class="fas fa-heart heart"></i></p>
            </div>

            <div class="footer-bg-effects">
                <div class="floating-particles">
                    <div class="particle"></div>
                    <div class="particle"></div>
                    <div class="particle"></div>
                    <div class="particle"></div>
                    <div class="particle"></div>
                    <div class="particle"></div>
                </div>
                <div class="wave-effect"></div>
            </div>
        </div>
    </footer>
    <!-- End Footer  -->

    <!-- Start up tp top  -->
    <div class="up">
        <i class="fa-solid fa-arrow-up"></i>
    </div>
    <!-- End up tp top  -->

    <script src="js/theme-manager.js"></script>
    <script src="app.js"></script>
    <script src="js/ui-toast.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const grid = document.getElementById('coursesGrid');
            const stateEl = document.getElementById('coursesState');
            const searchInput = document.getElementById('coursesSearch');
            const filterChips = document.querySelectorAll('.filter-chip');
            const totalCoursesLabel = document.getElementById('totalCoursesLabel');
            const featuredCoursesLabel = document.getElementById('featuredCoursesLabel');
            const visibleCoursesLabel = document.getElementById('visibleCoursesLabel');

            let allCourses = [];
            let filteredCourses = [];
            let activeFilter = 'all';

            function escapeHtml(str) {
                if (str === null || str === undefined) return '';
                return String(str)
                    .replace(/&/g, '&amp;')
                    .replace(/</g, '&lt;')
                    .replace(/>/g, '&gt;')
                    .replace(/"/g, '&quot;')
                    .replace(/'/g, '&#039;');
            }

            function renderCourses(courses) {
                grid.innerHTML = '';
                if (!courses.length) {
                    const empty = document.createElement('div');
                    empty.className = 'courses-state';
                    empty.innerHTML = '<p>لا توجد كورسات مطابقة لبحثك حالياً.</p>';
                    grid.appendChild(empty);
                    visibleCoursesLabel.textContent = '0 كورس ظاهر حالياً';
                    return;
                }

                courses.forEach(course => {
                    const icon = course.icon || 'fa-solid fa-book';
                    const title = course.title || 'بدون عنوان';
                    const description = course.description || '';
                    const instructor = course.instructor || (course.author || 'غير محدد');
                    const isFeatured = course.featured || false;

                    // determine free vs paid
                    const payField = (String(course.pay || '')).toLowerCase();
                    const rawPrice = course.price;
                    const priceIsStringFree = (typeof rawPrice === 'string' && rawPrice.toLowerCase() === 'free');
                    const priceIsZero = rawPrice === 0 || rawPrice === '0' || rawPrice === null || rawPrice === undefined;
                    const isFree = payField === 'free' || priceIsStringFree || priceIsZero || course.isFree === true;

                    // normalize price label
                    let priceLabel = 'مجاني';
                    if (!isFree) {
                        if (course.isPriceHidden) {
                            priceLabel = 'مدفوع';
                        } else if (typeof rawPrice === 'number' || (!isNaN(Number(rawPrice)) && rawPrice !== null)) {
                            priceLabel = Number(rawPrice) + ' جنيه';
                        } else if (rawPrice) {
                            priceLabel = String(rawPrice);
                        } else {
                            priceLabel = 'قابل للشراء';
                        }
                    }

                    const lessonsCount = (Array.isArray(course.units) ? course.units.length : (Array.isArray(course.lessons) ? course.lessons.length : 0));
                    const link = `course-page.html?id=${encodeURIComponent(course.id || course._id || course._id_str || '')}`;

                    const card = document.createElement('article');
                    card.className = 'course-card' + (!isFree ? ' paid-course' : '') + (isFeatured ? ' featured-course' : '');

                    // Promo video removed from cards - shown only in course-page.html
                    let promoHTML = '';

                    card.innerHTML = `
                    <div class="course-card-header">
                        <div class="course-icon"><i class="${icon}"></i></div>
                        <div class="course-title-area">
                            <h2 title="${escapeHtml(title)}">${escapeHtml(title)}</h2>
                            <p class="course-instructor"><i class="fa-solid fa-user"></i><span>${escapeHtml(instructor)}</span></p>
                        </div>
                        ${isFeatured ? '<div class="course-featured-badge"><i class="fa-solid fa-star"></i><span>كورس مميز</span></div>' : ''}
                    </div>
                    ${!isFree ? '<div class="course-paid-badge"><i class="fa-solid fa-crown"></i><span>مدفوع</span></div>' : ''}
                    <p class="course-description">${escapeHtml(description)}</p>
                    ${promoHTML}
                    <div class="course-meta-row">
                        <div class="course-price-pill ${isFree ? 'free' : ''}">
                            <i class="fa-solid ${isFree ? 'fa-gift' : 'fa-tag'}"></i>
                            <span>${escapeHtml(priceLabel)}</span>
                        </div>
                        <span class="course-lessons-count">${lessonsCount ? lessonsCount + ' وحدة تعليمية' : ''}</span>
                    </div>
                    <div class="course-cta">
                        <a href="${link}">
                            <i class="fa-solid fa-play"></i>
                            <span>متابعة الكورس</span>
                        </a>
                    </div>
                `;

                    grid.appendChild(card);
                });

                visibleCoursesLabel.textContent = `${courses.length} كورس ظاهر حالياً`;
            }

            function applyFilters() {

                const term = (searchInput.value || '').toLowerCase().trim();
                let data = [...allCourses];

                if (activeFilter === 'free') {
                    data = data.filter(c => {
                        const payField = (String(c.pay || '')).toLowerCase();
                        const rawPrice = c.price;
                        const priceIsStringFree = (typeof rawPrice === 'string' && rawPrice.toLowerCase() === 'free');
                        const priceIsZero = rawPrice === 0 || rawPrice === '0' || rawPrice === null || rawPrice === undefined;
                        const isFreeC = payField === 'free' || priceIsStringFree || priceIsZero || c.isFree === true;
                        return !!isFreeC;
                    });
                } else if (activeFilter === 'paid') {
                    data = data.filter(c => {
                        const payField = (String(c.pay || '')).toLowerCase();
                        const rawPrice = c.price;
                        const priceIsStringFree = (typeof rawPrice === 'string' && rawPrice.toLowerCase() === 'free');
                        const priceIsZero = rawPrice === 0 || rawPrice === '0' || rawPrice === null || rawPrice === undefined;
                        const isFreeC = payField === 'free' || priceIsStringFree || priceIsZero || c.isFree === true;
                        return !isFreeC;
                    });
                } else if (activeFilter === 'featured') {
                    data = data.filter(c => c.featured);
                }

                if (term) {
                    data = data.filter(c => {
                        const title = (c.title || '').toLowerCase();
                        const instructor = (c.instructor || '').toLowerCase();
                        return title.includes(term) || instructor.includes(term);
                    });
                }

                filteredCourses = data;
                renderCourses(filteredCourses);
            }

            try {
                if (stateEl) {
                    stateEl.innerHTML = '<div class="courses-spinner" aria-hidden="true"></div><p>جاري تحميل الكورسات...</p>';
                }

                const res = await fetch('/api/courses');
                let data = await res.json();
                if (!res.ok) throw new Error((data && (data.error || data.message)) || 'فشل في تحميل الكورسات');

                const courses = Array.isArray(data) ? data : (data.courses || []);
                allCourses = courses;

                const total = courses.length;
                const featuredCount = courses.filter(c => c.featured).length;

                totalCoursesLabel.textContent = total ? `${total} كورس` : 'لا توجد كورسات حالياً';
                featuredCoursesLabel.textContent = featuredCount ? `${featuredCount} كورس مميز` : 'لا توجد كورسات مميزة';

                stateEl && (stateEl.remove());

                applyFilters();

                // Show success toast
                if (window.showToast && total > 0) {
                    window.showToast(`تم تحميل ${total} كورس بنجاح`, {
                        type: 'success',
                        timeout: 3000,
                        title: 'تم التحميل',
                        icon: 'fas fa-check-circle'
                    });
                }
            } catch (err) {
                console.error('خطأ تحميل الكورسات:', err);
                if (grid) {
                    grid.innerHTML = `
                    <div class="courses-state courses-error">
                        <p>حدث خطأ أثناء تحميل الكورسات: ${err.message}</p>
                    </div>
                `;
                }
                visibleCoursesLabel.textContent = 'تعذر تحميل الكورسات';

                // Show error toast
                if (window.showToast) {
                    window.showToast(err.message || 'فشل في تحميل الكورسات', {
                        type: 'error',
                        timeout: 5000,
                        title: 'خطأ في التحميل',
                        icon: 'fas fa-exclamation-circle'
                    });
                }
            }

            // أحداث البحث
            if (searchInput) {
                searchInput.addEventListener('input', () => {
                    applyFilters();
                });
            }

            // أحداث الفلتر
            filterChips.forEach(chip => {
                chip.addEventListener('click', () => {
                    filterChips.forEach(c => c.classList.remove('active'));
                    chip.classList.add('active');
                    activeFilter = chip.getAttribute('data-filter');
                    applyFilters();
                });
            });
        });
    </script>
</body>

</html>