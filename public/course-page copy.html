<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
   <script>
    //    Ù…Ù†Ø¹ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ Ù„ÙŠÙ†Ùƒ ÙƒÙˆØ±Ø³ Ù…Ø¬Ø§Ù†ÙŠ Ø¨Ø¯ÙˆÙ† ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„
          (function () {
        const user = JSON.parse(localStorage.getItem("user"));
        if (!user) {
          window.location.replace("alert.html");
        }
      })();
   </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/normalize.css" />
    <link rel="stylesheet" href="css/all.min.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Marhey:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="icon" href="img/loogo.png" />
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
    <title>Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙˆØ±Ø³</title>
    <style>
            .loading-text {
                margin-right: 10px;
            }
            /* Course Display Styles */
            .course-display {
                display: flex;
                min-height: calc(100vh - 80px);
                background: var(--back-color);
                margin-top: 30px;
            }
        
            .course-sidebar {
                width: 350px;
                background: var(--sec-back-color);
                border-left: 1px solid rgba(255,255,255,0.1);
                overflow-y: auto;
                position: relative;
            }
        
            .course-main {
                flex: 1;
                display: flex;
                flex-direction: column;
                /* Fix for min-height: auto */
                min-height: fit-content;
            }
            .completion-message,
            .next-lesson-suggestion {
                display: none;
            }
            /* Fix min-height issue */
            .course-main {
                min-height: 100px;  /* Default fallback */
            }
        /* ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ù…Ø´ØºÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ */
        .plyr--video {
            --plyr-color-main: var(--main-color, #2196f3);
            border-radius: 12px;
            overflow: hidden;
        }
        .plyr__video-embed {
            border-radius: 12px;
            overflow: hidden;
        }
        .video-player-wrapper {
            width: 100%;
            margin: 0 auto;
            background: #000;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            aspect-ratio: 16/9;
        }
    </style>
    <style>
        .wrapper {
            width: 100%!important;
        }

        .loading-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
            text-align: center;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid var(--sec-back-color);
               min-height: unset;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-container {
            text-align: center;
            padding: 40px;
            background: var(--sec-back-color);
            border-radius: 12px;
            margin: 20px;
        }

        .error-container i {
            font-size: 48px;
            color: #e74c3c;
            margin-bottom: 20px;
        }

        .error-container h3 {
            color: var(--text-color);
            margin-bottom: 10px;
        }

        .error-container p {
            color: var(--sec-text-color);
            margin-bottom: 20px;
        }

        .error-container a {
            display: inline-block;
            padding: 10px 20px;
            background: var(--main-color);
            color: white;
            border-radius: 6px;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .error-container a:hover {
            background: #1976d2;
            transform: translateY(-2px);
        }
        
        /* Course Display Styles */
        .course-display {
            display: flex;
            min-height: calc(100vh - 80px);
            background: var(--back-color);
            margin-top: 30px;
        }
        
        .course-sidebar {
            width: 350px;
            background: var(--sec-back-color);
            border-left: 1px solid rgba(255,255,255,0.1);
            overflow-y: auto;
            position: relative;
        }
        
        .course-main {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .course-header {
            background: var(--sec-back-color);
            padding: 20px 30px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .course-title {
            color: var(--text-color);
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .course-description {
            color: var(--sec-text-color);
            font-size: 14px;
            line-height: 1.6;
        }
        
        .progress-section {
            background: var(--sec-back-color);
            padding: 12px 20px;
            border-bottom: 1px solid rgba(255,255,255,0.08);
        }
        
        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .progress-text {
            color: var(--sec-text-color);
            font-size: 12px;
            font-weight: 500;
            letter-spacing: .2px;
        }
        
        .progress-percentage {
            color: var(--main-color);
            font-weight: 600;
            font-size: 12px;
        }
        
        .progress-bar {
            width: 100%;
            height: 6px;
            background: linear-gradient(0deg, rgba(255,255,255,0.08), rgba(255,255,255,0.06));
            border-radius: 999px;
            overflow: hidden;
            box-shadow: inset 0 1px 2px rgba(0,0,0,0.25);
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--main-color), color-mix(in oklab, var(--main-color), white 15%));
            border-radius: 999px;
            transition: width 0.35s ease;
            will-change: width;
            width: 0%;
        }
        
        .content-area {
            flex: 1;
            padding: 30px;
                   min-height: 100px;
        }
        
        .video-container {
            background: #000;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 20px;
            position: relative;
            aspect-ratio: 16/9;
            width: 100%;
        }

        .video-container .plyr,
        .video-container .js-player {
            width: 100%;
            height: 100%;
        }
        
        /* ØªØ®ØµÙŠØµ Ù…Ø¸Ù‡Ø± Plyr */
        .plyr--video {
            border-radius: 12px;
        }

        .plyr__control--overlaid {
            background: var(--main-color);
        }

        .plyr--full-ui input[type=range] {
            color: var(--main-color);
        }

        .plyr__control:hover {
            background: var(--main-color);
        }
        
        .video-player {
            width: 100%;
            aspect-ratio: 16/9;
            border: none;
        }
        
        .pdf-container {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 20px;
            height: 600px;
            resize: vertical;
            overflow: auto;
            min-height: 300px;
            max-height: 90vh;
        }
        
        .pdf-viewer {
            width: 100%;
            height: 100%;
            border: none;
        }
        /* Commenting out custom PDF.js styles */
        /*
        .pdf-js-viewer {
            width: 100%;
            height: 100%;
            overflow: auto;
            background: #fff;
        }
        .pdf-js-viewer canvas {
            width: 100%;
            height: auto;
            display: block;
        }
        */
        
        .lesson-info {
            background: var(--sec-back-color);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }
        
        .lesson-title {
            color: var(--text-color);
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .lesson-description {
            color: var(--sec-text-color);
            font-size: 14px;
            line-height: 1.6;
        }
        
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
        }
        
        .nav-btn {
            background: var(--main-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .nav-btn:hover {
            background: #1976d2;
            transform: translateY(-2px);
        }
        
        .nav-btn:disabled {
            background: rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.5);
            cursor: not-allowed;
            transform: none;
        }
        
        .nav-btn i {
            font-size: 16px;
        }
        
        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            background: var(--back-color);
        }
        
        .sidebar-title {
            color: var(--text-color);
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .sidebar-subtitle {
            color: var(--sec-text-color);
            font-size: 12px;
        }
        
        .modules-list {
            padding: 0;
        }
        
        .module-item {
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        
        .module-header {
            padding: 15px 20px;
            cursor: pointer;
            transition: background 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 10px;
        }
        
        .module-header:hover {
            background: rgba(255,255,255,0.05);
        }
        
        .module-header.active {
            background: var(--main-color);
        }
        
        .module-title {
            color: var(--text-color);
            font-size: 14px;
            font-weight: 500;
        }
        
        .module-header.active .module-title {
            color: white;
        }
        
        .module-toggle {
            color: var(--sec-text-color);
            transition: transform 0.3s ease;
        }
        
        .module-header.active .module-toggle {
            color: white;
            transform: rotate(180deg);
        }
        
        .lessons-list {
            background: rgba(0,0,0,0.2);
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        
        .lessons-list.expanded {
            max-height: 500px;
        }
        
        .lesson-item {
            padding: 12px 20px 12px 40px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            position: relative;
            margin: 10px;
            border-radius: 10px;
        }
        .lesson-item > div {
            padding: 6px;
            margin: 6px;
        }
        .lesson-item .lesson-duration {
            text-align: center;
            font-size: 18px;
            color: var(--main-color);
        }
        
        .lesson-item:hover {
            background: rgba(255,255,255,0.05);
        }
        
        .lesson-item.active {
            background: var(--main-color)!important;
        }
        
        .lesson-item.completed {
            background: rgba(39, 174, 96, 0.2);
            color: var(--text-color);
        }
        
        .lesson-item.completed::before {
            content: 'âœ“';
            position: absolute;
            left: 20px;
            color: #27ae60;
            font-weight: bold;
        }
        
        .lesson-item.active::before {
            content: 'â–¶';
            position: absolute;
            left: 20px;
            color: white;
            font-weight: bold;
        }
        
        .lesson-title-sidebar {
            color: var(--text-color);
            font-size: 13px;
            font-weight: 400;
        }
        
        .lesson-item.active .lesson-title-sidebar {
            color: white!important;
        }
        
        .lesson-item.completed .lesson-title-sidebar {
            color: #27ae60;
        }
        
        .lesson-duration {
            color: var(--sec-text-color);
            font-size: 11px;
            margin-top: 2px;
        }
        
        .lesson-item.active .lesson-duration {
            color: rgba(255,255,255,0.8);
        }
        
        .lesson-type-icon {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--sec-text-color);
            font-size: 12px;
        }
        
        .lesson-item.active .lesson-type-icon {
            color: white;
        }
        .video-iframe {
            width: 100%;
            height: 100%;
            border: none;
            min-height: 600px;
        }
        .completion-message {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 500;
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .next-lesson-suggestion {
            background: var(--sec-back-color);
            border: 1px solid var(--main-color);
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .suggestion-text {
            color: var(--text-color);
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .suggestion-btn {
            background: var(--main-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .suggestion-btn:hover {
            background: #1976d2;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .course-display {
                flex-direction: column;
            }
            
            .course-sidebar {
                width: 100%;
                max-height: 300px;
            }
            
            .course-main {
                flex: 1;
                min-height: 100px;
            }
            
            .content-area {
                padding: 20px;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .nav-btn {
                width: 100%;
                justify-content: center;
            }
        }
        
        /* Loading States */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            color: var(--sec-text-color);
        }
        
        .loading i {
            font-size: 24px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
    </style>
  </head>
  <body>
    <!-- -------------------------------------------Start Header-------------------------------- -->
    <div dir="rtl" class="header">
            <div class="container">
                <div class="logo">
                    <a href="index.html" aria-label="Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"><img src="img/logo.png" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹"></a>
                </div>
                <div id="list" class="links">
                    <ul>
                        <li><a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠÙ‡</a></li>
                        <li><a href="courses.html">Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª </a></li>
                        <li><a href="portfolio.html">Ù…Ø´Ø§Ø±ÙŠØ¹Ù†Ø§ </a></li>
                        <li class="nav-dropdown"><a href="roadmap.html">Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„ØªØ¹Ù„Ù… <i class="fa-solid fa-angle-down"></i></a>
                            <ul class="nav-dropdown-items">
                                <li><a href="frontendroadmap.html">Front End </a></li>
                                <li><a href="backendroadmap.html">Back End</a></li>
                                <li><a href="cybersecurityroadmap.html">Cyber security</a></li>
                            </ul>
                        </li>
                        <li><a class="blog" href="blog.html">Ø§Ù„Ù…Ø¯ÙˆÙ†Ø©</a></li>
                    </ul>
                </div>
                <div  class="bars">
                    <i id="bars" class="fa-solid fa-bars "></i>
                </div>
                <div class="icon">
                    <div id="colorMode" class="theme">
                        <i  class="fa-solid fa-moon moon"></i>
                        <i  class="fa-solid fa-sun sun"></i>
                    </div>
                    <a href="store.html" aria-label="Ø§Ù„Ù…ØªØ¬Ø±" title="Ø§Ù„Ù…ØªØ¬Ø±"><i class="fa-solid fa-store store"></i></a>
                    <a href="login.html" aria-label="ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„" title="ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„"><i class="fa-solid fa-user user"></i></a>
                    <a href="profile.html" aria-label="Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ" title="Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ"><i id="userIcon" class="fa-solid fa-user"></i></a>
                </div>
            </div>
        </div>
    <!-- ---------------------------------------------End Header--------------------------------------- -->

    <!-- Course Display Interface -->
    <div class="course-display">
        <!-- Sidebar with Modules and Lessons -->
        <div class="course-sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title" id="courseTitle">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
                <div class="sidebar-subtitle" id="courseSubtitle">Ø§Ø®ØªØ± Ø¯Ø±Ø³Ø§Ù‹ Ù„Ù„Ø¨Ø¯Ø¡</div>
            </div>
            
            <div class="progress-section">
                <div class="progress-info">
                    <span class="progress-text">Ø§Ù„ØªÙ‚Ø¯Ù…</span>
                    <span class="progress-percentage" id="progressPercentage">0%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>
            
            <div class="modules-list" id="modulesList">
                <div class="loading">
                    <i class="fas fa-spinner" aria-hidden="true"></i>
                    <span class="loading-text">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰...</span>
            </div>
              </div>
        </div>
        
        <!-- Main Content Area -->
        <div class="course-main">
            <div class="course-header">
                <div class="course-title" id="mainCourseTitle">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
                <div class="course-description" id="mainCourseDescription">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ ÙˆØµÙ Ø§Ù„ÙƒÙˆØ±Ø³...</div>
            </div>
            
            <div class="content-area">
                <!-- Completion Message -->
                <div class="completion-message" id="completionMessage">
                    <i class="fas fa-check-circle"></i>
                    ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø¯Ø±Ø³ Ø¨Ù†Ø¬Ø§Ø­! ğŸ‰
                </div>
                
                <!-- Next Lesson Suggestion -->
                <div class="next-lesson-suggestion" id="nextLessonSuggestion">
                    <div class="suggestion-text">Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø¯Ø±Ø³ Ø§Ù„ØªØ§Ù„ÙŠØŸ</div>
                    <button class="suggestion-btn" onclick="goToNextLesson()">
                        <i class="fas fa-arrow-right"></i>
                        Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„ØªØ§Ù„ÙŠ
                    </button>
                </div>
                
                <!-- Content Container -->
                <div id="contentContainer">
                    <div class="loading">
                        <i class="fas fa-spinner"></i>
                        <span class="loading-text">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰...</span>
                    </div>

                    
      </div>
                
                <!-- Navigation Buttons -->
                <div class="navigation-buttons">
                    <button class="nav-btn" id="prevBtn" onclick="goToPreviousLesson()" disabled>
                        <i class="fas fa-arrow-right"></i>
                        Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø³Ø§Ø¨Ù‚
                    </button>
                    <button class="nav-btn" id="nextBtn" onclick="goToNextLesson()" disabled>
                        Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„ØªØ§Ù„ÙŠ
                        <i class="fas fa-arrow-left"></i>
                    </button>
                </div>
            </div>
      </div>
    </div>

    <!-- Start Footer  -->
    <footer id="footer">
      <div class="container">
          <div class="social">
              <h4>Social</h4>
              <div class="img">
                  <a href="index.html" aria-label="Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"><img src="img/logo.png" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹" /></a>
              </div>
              <ul class="social-links">
                  <li><a target="_blank" rel="noopener" href="https://facebook.com/teamworkm3" aria-label="Facebook"><img src="img/Facebook-1.png" alt="Facebook" /></a></li>
                  <li><a target="_blank" rel="noopener" href="https://youtube.com/@twm3" aria-label="YouTube"><img src="img/Youtube-1.png" alt="YouTube" /></a></li>
                  <li><a target="_blank" rel="noopener" href="https://instagram.com/mo_hussien_20" aria-label="Instagram"><img src="img/Instagram-1.png" alt="Instagram"/></a></li>
                  <li><a target="_blank" rel="noopener" href="https://t.me/teamworkm3" aria-label="Telegram"><img src="img/Telegram-1.png" alt="Telegram" /></a></li>
              </ul>
          </div>
          <div class="pages">
              <h4>pages</h4>
              <ul>
                  <li><a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠÙ‡</a></li>
                  <li><a href="courses.html">Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª</a></li>
                  <li><a href="portfolio.html">Ù…Ø´Ø§Ø±ÙŠØ¹Ù†Ø§</a></li>
                  <li><a href="roadmap.html">Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„ØªØ¹Ù„Ù…</a></li>
              </ul>
          </div>
          <div class="news">
              <h4>Blog</h4>
              <ul>
                  <li><a target="_blank" href="blog-details.html"> Ø§Ø²Ø§Ù„Ø© Ù‚ÙÙ„ Ø§Ù„Ù‡Ø§ØªÙ</a></li>
                  <li><a target="_blank" href="blog-details2.html">ØªØºÙŠÙŠØ± Ù…ÙˆÙ‚Ø¹Ùƒ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ù‡</a></li>
                  <li><a target="_blank" href="blog-details3.html">Ø§Ù„Ø±Ø¨Ø­ Ù…Ù† Ø«ØºØ±Ø§Øª Ø§Ù„ÙˆÙŠØ¨</a></li>
                  <li><a target="_blank" href="blog-details4.html"> Ø§Ø²Ø§Ù‰ ØªØ­Ù…Ù‰ Ù†ÙØ³Ùƒ Ù…Ù† Ø§Ù„Ø§Ø®ØªØ±Ø§Ù‚</a></li>
              </ul>
          </div>
      </div>
      <p> all copy Rights Reserved Â© <span id="yearData"></span> , created by <span>â¤</span> by twm3</p>
      <div class="shape">
          <img class="footer-shape1" src="img/footer-shape-1.svg" alt="" />
          <img class="footer-shape2" src="img/footer-shape-2.svg" alt="" />
      </div>
  </footer>
  <!-- End Footer  -->

    <!-- Start up tp top  -->
    <div class="up">
      <i class="fa-solid fa-arrow-up"></i>
    </div>
    <!-- End up tp top  -->

    <script src="app.js"></script>
    <script src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js"></script>
    <script src="js/video-player.js"></script>
    <script>
        // Global variables
        let currentCourse = null;
        let currentModuleIndex = 0;
        let currentLessonIndex = 0;
        let completedLessons = new Set();
        let courseData = null;
        // Plyr instances and loading lock to avoid freezes when switching lessons
        let _plyrInstances = [];
        let isLoadingLesson = false;

        // ØªØ­Ù…ÙŠÙ„ PDF.js Ø¹Ù†Ø¯ Ø§Ù„Ø·Ù„Ø¨ Ù…Ø¹ Ù…Ø­Ø§ÙˆÙ„Ø© Ø¹Ø¨Ø± Ø£ÙƒØ«Ø± Ù…Ù† CDN
        let pdfJsLoadingPromise = null;
        function ensurePdfJsLoaded() {
            if (window.pdfjsLib) return Promise.resolve();
            if (pdfJsLoadingPromise) return pdfJsLoadingPromise;
            const sources = [
                // Ø·Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¥ØµØ¯Ø§Ø± 3.11.174 Ù…Ù† jsDelivr Ø£ÙˆÙ„Ø§Ù‹
                {
                    core: 'https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.min.js',
                    worker: 'https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.worker.min.js'
                },
                {
                    core: 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.4.168/pdf.min.js',
                    worker: 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.4.168/pdf.worker.min.js'
                },
                {
                    core: 'https://cdn.jsdelivr.net/npm/pdfjs-dist@4.4.168/build/pdf.min.js',
                    worker: 'https://cdn.jsdelivr.net/npm/pdfjs-dist@4.4.168/build/pdf.worker.min.js'
                }
            ];
            pdfJsLoadingPromise = new Promise((resolve) => {
                let index = 0;
                const tryLoad = () => {
                    if (index >= sources.length) {
                        resolve(false); // ÙØ´Ù„ Ø§Ù„ØªØ­Ù…ÙŠÙ„
                        return;
                    }
                    const { core, worker } = sources[index++];
                    const script = document.createElement('script');
                    script.src = core;
                    script.crossOrigin = 'anonymous';
                    script.onload = () => {
                        try {
                            if (window['pdfjsLib']) {
                                window.pdfjsLib.GlobalWorkerOptions.workerSrc = worker;
                                resolve(true);
                            } else {
                                tryLoad();
                            }
                        } catch (_) {
                            tryLoad();
                        }
                    };
                    script.onerror = () => {
                        tryLoad();
                    };
                    document.head.appendChild(script);
                };
                tryLoad();
            });
            return pdfJsLoadingPromise;
        }

        // Load lesson content
function loadLessonContent(moduleIndex, lessonIndex, lesson) {
    const contentContainer = document.getElementById('contentContainer');
    if (!lesson) {
        console.error('Lesson is not defined');
        contentContainer.innerHTML = '<div class="no-content">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø­ØªÙˆÙ‰ Ù…ØªØ§Ø­.</div>';
        return;
    }

    if (isLoadingLesson) return;
    isLoadingLesson = true;

    // Show lightweight loading placeholder immediately
    contentContainer.innerHTML = `
        <div class="loading-container">
            <div class="loading-spinner"></div>
            <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰...</p>
        </div>
    `;

    // yield to browser
    setTimeout(async () => {
        try {
            // Destroy previous players
            if (Array.isArray(_plyrInstances) && _plyrInstances.length) {
                _plyrInstances.forEach(p => { try { p.destroy(); } catch(_) {} });
            }
            _plyrInstances = [];

            let link = getLessonLink(lesson);
            if (!link) {
                contentContainer.innerHTML = '<div class="no-content">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø­ØªÙˆÙ‰ Ù…ØªØ§Ø­.</div>';
                return;
            }

            let html = '';

            if (isVideoLink(link)) {
                // Normalize YouTube short links to id
                let videoId = '';
                if (link.includes('youtu.be/')) videoId = link.split('youtu.be/')[1].split('?')[0];
                else if (link.includes('youtube.com/watch')) { try { videoId = new URL(link).searchParams.get('v'); } catch(_) {} }
                else if (link.includes('youtube.com/embed/')) videoId = link.split('embed/')[1].split('?')[0];
                else if (link.includes('youtube.com/shorts/')) { const m = link.match(/youtube\.com\/shorts\/([a-zA-Z0-9_-]+)/); videoId = m?.[1] || ''; }

                if (videoId) {
                    html += `<div class="video-container" style="opacity:0;transition:opacity .25s;"><div class="plyr__video-embed" data-plyr-provider="youtube" data-plyr-embed-id="${videoId}"></div></div>`;
                } else if (link.toLowerCase().endsWith('.mp4') || link.toLowerCase().endsWith('.mov')) {
                    html += `<div class="video-container" style="opacity:0;transition:opacity .25s;"><video class="plyr" controls><source src="${link}" type="video/mp4">Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø¹Ø±Ø¶ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ.</video></div>`;
                } else {
                    html += `<div class='no-content'>Ø±Ø§Ø¨Ø· ÙÙŠØ¯ÙŠÙˆ ØºÙŠØ± ØµØ§Ù„Ø­</div>`;
                }
            } else if (isPdfLink(link)) {
                let pdfSrc = link;
                if (!/^https?:\/\//.test(pdfSrc) && !pdfSrc.startsWith('/uploads/') && !pdfSrc.startsWith('/pdfjs/')) {
                    pdfSrc = '/uploads/' + pdfSrc.replace(/^\/+/, '');
                }
                html += `<div class="pdf-container"><iframe class="pdf-viewer" src="/pdfjs/web/viewer.html?file=${encodeURIComponent(pdfSrc)}" title="${lesson.title || 'PDF'}"></iframe></div>`;
            } else if (link.startsWith('http')) {
                html += `<div class="external-link"><a href="${link}" target="_blank" rel="noopener noreferrer">Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„ÙØªØ­ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ</a></div>`;
            } else {
                html += `<div class="no-content">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø­ØªÙˆÙ‰ ØµØ§Ù„Ø­ Ù„Ù„Ø¹Ø±Ø¶.</div>`;
            }

            html += `<div class="lesson-info"><div class="lesson-title">${lesson.title || 'Ø¹Ù†ÙˆØ§Ù† ØºÙŠØ± Ù…ØªÙˆÙØ±'}</div><div class="lesson-description">${lesson.description || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¯Ø±Ø³'}</div></div>`;

            // set once
            contentContainer.innerHTML = html;

            // Initialize Plyr sequentially to avoid blocking
            if (window.Plyr) {
                const nodes = Array.from(contentContainer.querySelectorAll('.plyr, .plyr__video-embed'));
                const created = await initPlyrSequential(nodes);
                _plyrInstances.push(...created);
            }

            // fade-in
            const container = contentContainer.querySelector('.video-container');
            if (container) container.style.opacity = '1';

            updateNavigationButtons();

        } catch (err) {
            console.error('Error loading lesson content', err);
            contentContainer.innerHTML = '<div class="error-container"><p>Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰</p></div>';
        } finally {
            // small delay to avoid accidental rapid switching
            setTimeout(() => { isLoadingLesson = false; }, 300);
        }
    }, 60);
}

// Debounce guard for lesson clicks
let _lastLessonClick = 0;
function selectLessonDebounced(moduleIndex, lessonIndex) {
    const now = Date.now();
    if (now - _lastLessonClick < 350) return; // ignore very rapid clicks
    _lastLessonClick = now;
    // If a lesson is already loading, ignore
    if (isLoadingLesson) return;
    loadLesson(moduleIndex, lessonIndex);
}

// Initialize Plyr instances sequentially to avoid blocking
function initPlyrSequential(nodeList) {
    return new Promise(resolve => {
        if (!nodeList || nodeList.length === 0) return resolve([]);
        const created = [];
        let i = 0;
        function next() {
            if (i >= nodeList.length) {
                resolve(created);
                return;
            }
            try {
                const p = new Plyr(nodeList[i]);
                created.push(p);
            } catch (e) {
                console.warn('Plyr init failed for node', e);
            }
            i++;
            // yield to browser so it can update UI and avoid long tasks
            requestAnimationFrame(next);
        }
        requestAnimationFrame(next);
    });
}

// Render course content (modules and lessons) - rebuilt to use DOM API and attach listeners
function renderCourseContent() {
    const modulesList = document.getElementById('modulesList');
    modulesList.innerHTML = '';

    if (!courseData.units || courseData.units.length === 0) {
        const noEl = document.createElement('div');
        noEl.style.padding = '20px';
        noEl.style.textAlign = 'center';
        noEl.style.color = 'var(--sec-text-color)';
        noEl.textContent = 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯Ø±ÙˆØ³ Ù…ØªØ§Ø­Ø©';
        modulesList.appendChild(noEl);
        return;
    }

    courseData.units.forEach((unit, moduleIndex) => {
        const moduleItem = document.createElement('div');
        moduleItem.className = 'module-item';

        const header = document.createElement('div');
        header.className = 'module-header' + (moduleIndex === 0 ? ' active' : '');
        header.addEventListener('click', () => toggleModule(moduleIndex));

        const title = document.createElement('div');
        title.className = 'module-title';
        title.textContent = unit.title || 'ÙˆØ­Ø¯Ø© Ø¨Ø¯ÙˆÙ† Ø¹Ù†ÙˆØ§Ù†';

        const toggleIcon = document.createElement('i');
        toggleIcon.className = 'fas fa-chevron-down module-toggle';

        header.appendChild(title);
        header.appendChild(toggleIcon);

        const lessonsWrapper = document.createElement('div');
        lessonsWrapper.className = 'lessons-list' + (moduleIndex === 0 ? ' expanded' : '');
        lessonsWrapper.id = `lessons-${moduleIndex}`;

        if (Array.isArray(unit.lessons)) {
            unit.lessons.forEach((lesson, lessonIndex) => {
                const lessonEl = document.createElement('div');
                lessonEl.className = 'lesson-item' + ((moduleIndex === 0 && lessonIndex === 0) ? ' active' : '');
                if (completedLessons.has(`${moduleIndex}-${lessonIndex}`)) lessonEl.classList.add('completed');
                lessonEl.dataset.module = moduleIndex;
                lessonEl.dataset.lesson = lessonIndex;

                const titleDiv = document.createElement('div');
                titleDiv.className = 'lesson-title-sidebar';
                titleDiv.textContent = lesson.title || 'Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¯Ø±Ø³';

                const durDiv = document.createElement('div');
                durDiv.className = 'lesson-duration';
                durDiv.textContent = (lesson.duration ? (lesson.duration + ' Ø¯Ù‚Ø§Ø¦Ù‚') : '5 Ø¯Ù‚Ø§Ø¦Ù‚');

                lessonEl.appendChild(titleDiv);
                lessonEl.appendChild(durDiv);

                lessonEl.addEventListener('click', () => selectLessonDebounced(moduleIndex, lessonIndex));

                lessonsWrapper.appendChild(lessonEl);
            });
        }

        moduleItem.appendChild(header);
        moduleItem.appendChild(lessonsWrapper);
        modulesList.appendChild(moduleItem);
    });

    // Update progress after rendering in case units changed
    updateProgress();
}

// Helpers to resolve lesson link and type
function getLessonLink(lesson) {
    return (
        lesson.link?.trim() ||
        lesson.fileUrl?.trim() ||
        lesson.videoUrl?.trim() ||
        lesson.externalUrl?.trim() ||
        ''
    );
}

function isPdfLink(rawLink) {
    if (!rawLink) return false;
    const lower = rawLink.toLowerCase();
    if (lower.endsWith('.pdf')) return true;
    try {
        const u = new URL(rawLink);
        return u.pathname.toLowerCase().endsWith('.pdf');
    } catch (_) {
        return false;
    }
}

function isVideoLink(rawLink) {
    if (!rawLink) return false;
    const link = rawLink.toLowerCase();
    return (
        link.includes('youtube.com/watch?v=') ||
        link.includes('youtube.com/embed') ||
        link.includes('youtu.be/') ||
        link.includes('youtube.com/shorts/') ||
        link.includes('drive.google.com/file/d/') ||
        link.endsWith('.mp4') ||
        link.endsWith('.mov')
    );
}

// Get course ID from URL
const urlParams = new URLSearchParams(window.location.search);
const courseId = urlParams.get('id');

// Initialize the course display
async function initializeCourse() {
    const contentContainer = document.getElementById('contentContainer');
    const modulesList = document.getElementById('modulesList');
    
    if (!courseId) {
        showError("Ù…Ø¹Ø±Ù Ø§Ù„ÙƒÙˆØ±Ø³ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");
        return;
    }

    try {
        // Ø¹Ø±Ø¶ Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
        contentContainer.innerHTML = `
            <div class="loading-container">
                <div class="loading-spinner"></div>
                <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ÙƒÙˆØ±Ø³...</p>
            </div>
        `;

        // Ù…Ø­Ø§ÙˆÙ„Ø© Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ± Ø§Ù„Ù…Ø­Ù„ÙŠ Ø£ÙˆÙ„Ø§Ù‹
        let response = await fetch(`http://localhost:5000/api/courses/${courseId}`);
        
        // Ø¥Ø°Ø§ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ± Ø§Ù„Ù…Ø­Ù„ÙŠØŒ Ù†Ø¬Ø±Ø¨ Ø§Ù„Ø³ÙŠØ±ÙØ± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
        if (!response.ok) {
            response = await fetch(`https://api.teamworkm3.com/api/courses/${courseId}`);
        }
        
        if (!response.ok) {
            throw new Error(`ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒÙˆØ±Ø³: ${response.status}`);
        }

        const course = await response.json();
        
        if (!course) {
            showError("Ø§Ù„ÙƒÙˆØ±Ø³ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");
            return;
        }
        
        courseData = course;
        currentCourse = course;
        
        // Update course information
        document.getElementById('courseTitle').textContent = course.title;
        document.getElementById('mainCourseTitle').textContent = course.title;
        document.getElementById('mainCourseDescription').textContent = course.full_description || course.description || '';
        document.getElementById('courseSubtitle').textContent = `${course.lessons?.length || 0} Ø¯Ø±Ø³`;
        
        // Set page title
        document.title = course.title;
        
        // Render modules and lessons
        renderCourseContent();
        
        // Auto-open the first video lesson if available, otherwise the first available lesson
        if (course.units && course.units.length > 0) {
            let foundModule = -1;
            let foundLesson = -1;

            // Prefer first video lesson
            for (let m = 0; m < course.units.length; m++) {
                const unit = course.units[m];
                if (!Array.isArray(unit.lessons)) continue;
                for (let l = 0; l < unit.lessons.length; l++) {
                    const link = getLessonLink(unit.lessons[l]);
                    if (isVideoLink(link)) {
                        foundModule = m;
                        foundLesson = l;
                        break;
                    }
                }
                if (foundModule !== -1) break;
            }

            // Fallback: first lesson in first non-empty unit
            if (foundModule === -1) {
                const firstUnitIndex = course.units.findIndex(u => Array.isArray(u.lessons) && u.lessons.length > 0);
                if (firstUnitIndex !== -1) {
                    foundModule = firstUnitIndex;
                    foundLesson = 0;
                }
            }

            if (foundModule !== -1 && foundLesson !== -1) {
                loadLesson(foundModule, foundLesson);
            }
        }
        
        // Load progress from localStorage
        loadProgress();
        
    } catch (error) {
        console.error('Error loading course:', error);
        showError("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒÙˆØ±Ø³");
    }
}

// Update progress bar and prune invalid completed lessons
function updateProgress() {
    const existingKeys = new Set();
    let totalLessons = 0;
    if (Array.isArray(courseData?.units)) {
        courseData.units.forEach((unit, mIdx) => {
            if (Array.isArray(unit.lessons)) {
                unit.lessons.forEach((_, lIdx) => {
                    existingKeys.add(`${mIdx}-${lIdx}`);
                    totalLessons += 1;
                });
            }
        });
    }

    const prunedCompleted = new Set();
    completedLessons.forEach(key => {
        if (existingKeys.has(key)) prunedCompleted.add(key);
    });
    completedLessons = prunedCompleted;

    const completedCount = completedLessons.size;
    let percentage = totalLessons > 0 ? Math.round((completedCount / totalLessons) * 100) : 0;
    if (percentage > 100) percentage = 100;
    if (percentage < 0) percentage = 0;

    const percEl = document.getElementById('progressPercentage');
    const fillEl = document.getElementById('progressFill');
    if (percEl) percEl.textContent = `${percentage}%`;
    if (fillEl) fillEl.style.width = `${percentage}%`;
}

// Mark a lesson as completed and persist
function markLessonAsCompleted(moduleIndex, lessonIndex) {
    const lessonKey = `${moduleIndex}-${lessonIndex}`;
    completedLessons.add(lessonKey);

    const lessonItem = document.querySelector(`[data-module="${moduleIndex}"][data-lesson="${lessonIndex}"]`);
    if (lessonItem) {
        lessonItem.classList.add('completed');
    }

    updateProgress();
    saveProgress();
    showCompletionMessage();
}

// Show completion and next-lesson suggestion briefly
function showCompletionMessage() {
    const completionMessage = document.getElementById('completionMessage');
    const nextLessonSuggestion = document.getElementById('nextLessonSuggestion');
    if (!completionMessage || !nextLessonSuggestion) return;
    completionMessage.style.display = 'block';
    nextLessonSuggestion.style.display = 'block';
    setTimeout(() => {
        completionMessage.style.display = 'none';
        nextLessonSuggestion.style.display = 'none';
    }, 5000);
}

// Enable/disable prev/next buttons based on position
function updateNavigationButtons() {
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const currentUnit = courseData?.units?.[currentModuleIndex];
    const totalInUnit = currentUnit?.lessons?.length || 0;
    if (prevBtn) prevBtn.disabled = currentLessonIndex === 0;
    if (nextBtn) nextBtn.disabled = totalInUnit === 0 || currentLessonIndex === totalInUnit - 1;
}

// Toggle module expansion
function toggleModule(moduleIndex) {
    const moduleHeader = document.querySelector(`[onclick="toggleModule(${moduleIndex})"]`);
    const lessonsList = document.getElementById(`lessons-${moduleIndex}`);
    
    moduleHeader.classList.toggle('active');
    lessonsList.classList.toggle('expanded');
}

// Load a specific lesson
function loadLesson(moduleIndex, lessonIndex) {
    if (!courseData || !courseData.units || !courseData.units[moduleIndex] || !courseData.units[moduleIndex].lessons[lessonIndex]) {
        return;
    }

    const lesson = courseData.units[moduleIndex].lessons[lessonIndex];

    currentModuleIndex = moduleIndex;
    currentLessonIndex = lessonIndex;

    updateActiveStates(moduleIndex, lessonIndex);
    loadLessonContent(moduleIndex, lessonIndex, lesson);
    updateNavigationButtons();
}

// Update active states in sidebar
function updateActiveStates(moduleIndex, lessonIndex) {
    // Remove all active classes
    document.querySelectorAll('.lesson-item').forEach(item => {
        item.classList.remove('active');
    });
    
    // Add active class to current lesson
    const currentLessonItem = document.querySelector(`[data-module="${moduleIndex}"][data-lesson="${lessonIndex}"]`);
    if (currentLessonItem) {
        currentLessonItem.classList.add('active');
    }
}

// Save progress to localStorage
function saveProgress() {
    // Ensure progress reflects pruned keys and current totals
    updateProgress();
    const progressData = {
        courseId: courseId,
        completedLessons: Array.from(completedLessons),
        lastAccessed: new Date().toISOString()
    };
    
    localStorage.setItem(`courseProgress_${courseId}`, JSON.stringify(progressData));
}

// Load progress from localStorage
function loadProgress() {
    const progressData = localStorage.getItem(`courseProgress_${courseId}`);
    
    if (progressData) {
        try {
            const data = JSON.parse(progressData);
            completedLessons = new Set(data.completedLessons || []);
            updateProgress();
            
            // Update completed lessons in UI
            completedLessons.forEach(lessonKey => {
                const [moduleIndex, lessonIndex] = lessonKey.split('-');
                const lessonItem = document.querySelector(`[data-module="${moduleIndex}"][data-lesson="${lessonIndex}"]`);
                if (lessonItem) {
                    lessonItem.classList.add('completed');
                }
            });
        } catch (error) {
            console.error('Error loading progress:', error);
        }
    }
}

// Show error message
function showError(message) {
    const contentContainer = document.getElementById('contentContainer');
    const modulesList = document.getElementById('modulesList');
    
    // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
    contentContainer.innerHTML = `
        <div class="error-container">
            <i class="fas fa-exclamation-triangle"></i>
            <h3>${message}</h3>
            <p>ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø£Ùˆ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</p>
            <a href="courses.html">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ÙƒÙˆØ±Ø³Ø§Øª</a>
        </div>
    `;

    // Ø¥Ø®ÙØ§Ø¡ Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ù…Ù† Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙˆØ­Ø¯Ø§Øª
    if (modulesList) {
        modulesList.innerHTML = `
            <div class="error-container">
                <p>Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­Ù…ÙŠÙ„ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ÙƒÙˆØ±Ø³</p>
            </div>
        `;
    }

    // Ø¥Ø®ÙØ§Ø¡ Ø¹Ù†Ø§ØµØ± Ø£Ø®Ø±Ù‰
    document.getElementById('progressPercentage').textContent = '0%';
    document.getElementById('progressFill').style.width = '0%';
    document.getElementById('courseTitle').textContent = 'Ø­Ø¯Ø« Ø®Ø·Ø£';
    document.getElementById('mainCourseTitle').textContent = 'Ø­Ø¯Ø« Ø®Ø·Ø£';
    document.getElementById('mainCourseDescription').textContent = 'Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­Ù…ÙŠÙ„ ÙˆØµÙ Ø§Ù„ÙƒÙˆØ±Ø³';
}

// Initialize when page loads
document.addEventListener('DOMContentLoaded', function() {
    if (courseId) {
        initializeCourse();
        } else {
        showError("Ù…Ø¹Ø±Ù Ø§Ù„ÙƒÙˆØ±Ø³ ØºÙŠØ± ØµØ­ÙŠØ­");
    }
});

// Handle video completion (for iframe videos)
window.addEventListener('message', function(event) {
    // This would handle video completion events from embedded players
    // For now, we'll use a simple timeout approach
});
    </script>
    
  </body>
</html>
